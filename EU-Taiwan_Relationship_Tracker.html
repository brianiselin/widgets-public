<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EU-Taiwan Relations Tracker | Iselin Group</title>
    <meta name="description" content="Comprehensive tracker of EU-Taiwan relations covering trade, investment, technology, semiconductors, diplomatic engagement, and strategic cooperation.">
    
    <!-- Cloudflare Web Analytics -->
    <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "22466d27b8c14ef98293d50b38526660"}'></script>
    <!-- End Cloudflare Web Analytics -->
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <!-- html2canvas for PNG export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #0a1628 0%, #1a2a42 100%);
            color: #e0e6ed;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* Top Brand Bar */
        .brand-bar-top {
            background: linear-gradient(90deg, rgba(10, 22, 40, 0.95) 0%, rgba(26, 42, 66, 0.95) 100%);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .brand-left {
            font-size: 14px;
            font-weight: 600;
            color: #94a3b8;
        }
        
        .brand-center {
            font-size: 12px;
            color: #64748b;
            letter-spacing: 0.5px;
        }
        
        .brand-chip {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(59, 130, 246, 0.1);
            padding: 6px 12px;
            border-radius: 20px;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        .brand-logo {
            height: 24px;
            width: 24px;
            object-fit: contain;
            border-radius: 4px;
        }
        
        .brand-chip-text {
            font-size: 11px;
            font-weight: 600;
            color: #60a5fa;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Main Container */
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 40px 24px;
            flex: 1;
        }
        
        /* Header */
        .header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .eu-flag {
            width: 64px;
            height: 64px;
            background: #003399;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
        }
        
        .header-content {
            flex: 1;
        }
        
        .main-title {
            font-size: 42px;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 8px;
        }
        
        .ranking-info {
            font-size: 14px;
            color: #94a3b8;
            margin-top: 8px;
        }
        
        .ranking-badge {
            display: inline-block;
            background: rgba(245, 158, 11, 0.2);
            padding: 4px 12px;
            border-radius: 12px;
            color: #fbbf24;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .score-badge {
            display: inline-block;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            padding: 8px 24px;
            border-radius: 24px;
            font-size: 32px;
            font-weight: 700;
            color: white;
            margin-left: 16px;
        }
        
        /* Sub-scores */
        .subscores {
            display: flex;
            gap: 16px;
            margin-top: 16px;
            flex-wrap: wrap;
        }
        
        .subscore {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        
        .subscore-label {
            font-size: 11px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .subscore-value {
            font-size: 20px;
            font-weight: 700;
            color: #f1f5f9;
            background: rgba(59, 130, 246, 0.2);
            padding: 4px 12px;
            border-radius: 8px;
        }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 32px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2563eb;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e0e6ed;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        /* Widget Area */
        #widget-area {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 32px;
            backdrop-filter: blur(10px);
        }
        
        /* Section Headers */
        .section-header {
            font-size: 24px;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid rgba(245, 158, 11, 0.3);
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 16px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.8) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #f59e0b 0%, #ef4444 100%);
        }
        
        .stat-card.green::before {
            background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
        }
        
        .stat-card.blue::before {
            background: linear-gradient(90deg, #3b82f6 0%, #60a5fa 100%);
        }
        
        .stat-card.purple::before {
            background: linear-gradient(90deg, #8b5cf6 0%, #a78bfa 100%);
        }
        
        .stat-title {
            font-size: 12px;
            color: #94a3b8;
            margin-bottom: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 6px;
            display: flex;
            align-items: baseline;
            gap: 6px;
        }
        
        .stat-unit {
            font-size: 20px;
            color: #94a3b8;
        }
        
        .stat-change {
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
        }
        
        .stat-change.positive {
            color: #34d399;
            background: rgba(52, 211, 153, 0.1);
        }
        
        .stat-change.negative {
            color: #f87171;
            background: rgba(248, 113, 113, 0.1);
        }
        
        .stat-label {
            font-size: 14px;
            color: #cbd5e1;
            margin-left: 6px;
        }
        
        .stat-sublabel {
            font-size: 11px;
            color: #64748b;
            margin-top: 4px;
        }
        
        /* Charts Section */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
            margin-bottom: 40px;
        }
        
        .chart-container {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 24px;
        }
        
        .chart-container.full-width {
            grid-column: 1 / -1;
        }
        
        .chart-title {
            font-size: 18px;
            font-weight: 600;
            color: #f1f5f9;
            margin-bottom: 20px;
        }
        
        .chart-wrapper {
            height: 300px;
            position: relative;
        }
        
        .chart-wrapper.tall {
            height: 400px;
        }
        
        /* Heatmap */
        .heatmap-grid {
            display: grid;
            grid-template-columns: 200px repeat(5, 1fr);
            gap: 8px;
            margin-top: 20px;
        }
        
        .heatmap-label {
            font-size: 13px;
            color: #cbd5e1;
            padding: 12px 8px;
            display: flex;
            align-items: center;
        }
        
        .heatmap-cell {
            height: 48px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            color: white;
            transition: transform 0.2s;
        }
        
        .heatmap-cell:hover {
            transform: scale(1.05);
        }
        
        .intensity-very-high {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
        }
        
        .intensity-high {
            background: linear-gradient(135deg, #f59e0b 0%, #fb923c 100%);
        }
        
        .intensity-medium {
            background: linear-gradient(135deg, #fbbf24 0%, #fcd34d 100%);
        }
        
        .intensity-low {
            background: linear-gradient(135deg, #60a5fa 0%, #93c5fd 100%);
        }
        
        .intensity-very-low {
            background: linear-gradient(135deg, #64748b 0%, #94a3b8 100%);
        }
        
        /* Policy Areas */
        .policy-bars {
            display: flex;
            flex-direction: column;
            gap: 14px;
        }
        
        .policy-item {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .policy-label {
            width: 180px;
            font-size: 13px;
            color: #cbd5e1;
            font-weight: 500;
        }
        
        .policy-bar-track {
            flex: 1;
            height: 32px;
            background: rgba(15, 23, 42, 0.8);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }
        
        .policy-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #f59e0b 0%, #fb923c 100%);
            transition: width 0.6s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 12px;
            font-size: 12px;
            font-weight: 700;
            color: white;
        }
        
        /* Flow Diagram */
        .flow-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 40px 0;
        }
        
        .flow-entity {
            text-align: center;
        }
        
        .flow-flag {
            font-size: 64px;
            margin-bottom: 12px;
        }
        
        .flow-label {
            font-size: 16px;
            font-weight: 600;
            color: #f1f5f9;
        }
        
        .flow-arrows {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .flow-arrow {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .arrow-line {
            width: 200px;
            height: 3px;
            background: linear-gradient(90deg, #f59e0b 0%, #fb923c 100%);
            position: relative;
        }
        
        .arrow-line::after {
            content: '▶';
            position: absolute;
            right: -8px;
            top: -8px;
            color: #fb923c;
            font-size: 16px;
        }
        
        .arrow-reverse .arrow-line {
            background: linear-gradient(90deg, #3b82f6 0%, #60a5fa 100%);
        }
        
        .arrow-reverse .arrow-line::after {
            content: '◀';
            right: auto;
            left: -8px;
            color: #60a5fa;
        }
        
        .flow-value {
            font-size: 18px;
            font-weight: 700;
            color: #f1f5f9;
            min-width: 100px;
        }
        
        .flow-description {
            font-size: 12px;
            color: #94a3b8;
        }
        
        /* Timeline */
        .timeline {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            padding: 40px 0;
            overflow-x: auto;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #f59e0b 0%, #fb923c 100%);
            transform: translateY(-50%);
        }
        
        .timeline-item {
            position: relative;
            text-align: center;
            z-index: 1;
            min-width: 120px;
        }
        
        .timeline-dot {
            width: 16px;
            height: 16px;
            background: #f59e0b;
            border: 3px solid #0f172a;
            border-radius: 50%;
            margin: 0 auto 12px;
        }
        
        .timeline-label {
    font-size: 12px;
    font-weight: 600;
    color: #cbd5e1;
    line-height: 1.4;
    max-width: 120px;
    margin: 0 auto;
    margin-top: 30px;  /* or even 16px for more space */
    padding-top: 4px;  /* Add this line - extra space if needed */
}

        }
        
        .timeline-year {
            font-size: 11px;
            color: #64748b;
            margin-top: 4px;
        }
        
        /* Member States Grid */
        .member-states-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }
        
        .member-state-card {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .member-state-card:hover {
            background: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
        }
        
        .member-state-card.active {
            border-color: rgba(245, 158, 11, 0.5);
            background: rgba(245, 158, 11, 0.1);
        }
        
        .member-state-name {
            font-size: 12px;
            font-weight: 600;
            color: #cbd5e1;
        }
        
        .member-state-indicator {
            font-size: 10px;
            color: #10b981;
            margin-top: 4px;
        }
        
        /* Risk Indicators */
        .risk-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 20px;
        }
        
        .risk-card {
            background: rgba(15, 23, 42, 0.8);
            border-left: 4px solid;
            border-radius: 8px;
            padding: 16px;
        }
        
        .risk-card.low {
            border-color: #10b981;
        }
        
        .risk-card.medium {
            border-color: #fbbf24;
        }
        
        .risk-card.high {
            border-color: #ef4444;
        }
        
        .risk-title {
            font-size: 14px;
            font-weight: 600;
            color: #f1f5f9;
            margin-bottom: 8px;
        }
        
        .risk-level {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .risk-card.low .risk-level {
            color: #10b981;
        }
        
        .risk-card.medium .risk-level {
            color: #fbbf24;
        }
        
        .risk-card.high .risk-level {
            color: #ef4444;
        }
        
        .risk-description {
            font-size: 11px;
            color: #94a3b8;
            margin-top: 6px;
            line-height: 1.4;
        }
        
        /* Data Sources */
        .sources-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-top: 40px;
        }
        
        .sources-card {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 24px;
        }
        
        .sources-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .source-item {
            font-size: 13px;
            color: #cbd5e1;
            padding-left: 20px;
            position: relative;
        }
        
        .source-item::before {
            content: '•';
            position: absolute;
            left: 0;
            color: #f59e0b;
            font-weight: bold;
        }
        
        .methodology-highlight {
            color: #fbbf24;
            font-weight: 600;
        }
        
        /* Bottom Brand Bar */
        .brand-bar-bottom {
            background: rgba(10, 22, 40, 0.95);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 24px;
            margin-top: auto;
        }
        
        .bottom-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .bottom-title {
            font-size: 14px;
            font-weight: 600;
            color: #94a3b8;
        }
        
        .bottom-meta {
            font-size: 12px;
            color: #64748b;
            line-height: 1.6;
        }
        
        .ip-notice {
            font-size: 11px;
            color: #475569;
            font-variant: small-caps;
            line-height: 1.6;
            padding-top: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: #10b981;
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Share Menu */
        .share-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            background: rgba(30, 41, 59, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 8px;
            display: none;
            flex-direction: column;
            gap: 4px;
            min-width: 160px;
            backdrop-filter: blur(10px);
            z-index: 200;
        }
        
        .share-menu.show {
            display: flex;
        }
        
        .share-item {
            padding: 10px 16px;
            color: #e0e6ed;
            text-decoration: none;
            border-radius: 6px;
            font-size: 14px;
            transition: background 0.2s;
        }
        
        .share-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .heatmap-grid {
                grid-template-columns: 150px repeat(5, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .brand-bar-top {
                flex-direction: column;
                gap: 12px;
                text-align: center;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .sources-section {
                grid-template-columns: 1fr;
            }
            
            .risk-grid {
                grid-template-columns: 1fr;
            }
            
            .main-title {
                font-size: 28px;
            }
            
            .score-badge {
                font-size: 24px;
                padding: 6px 16px;
            }
            
            .flow-arrows {
                flex-direction: column;
            }
            
            .arrow-line {
                width: 120px;
            }
            
            .heatmap-grid {
                grid-template-columns: 120px repeat(3, 1fr);
                font-size: 11px;
            }
            
            .member-states-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- Top Brand Bar -->
    <div class="brand-bar-top">
        <div class="brand-left">Iselin Group - Strategic Consulting</div>
        <div class="brand-center">iselingroup.com • brian.iselin(@)iselingroup.com</div>
        <div class="brand-chip">
           <img src="https://brianiselin.github.io/widgets-public/Iselin_Group_Logo_1024%20x.jpg" alt="Iselin Group" class="brand-logo">

            <span class="brand-chip-text">Iselin Group</span>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="eu-flag">🇪🇺</div>
            <div class="header-content">
                <h1 class="main-title">
                    EU-Taiwan Relations Tracker
                    <span class="score-badge">6.8<span style="font-size: 18px; opacity: 0.8;">/10</span></span>
                </h1>
                <div class="ranking-info">
                    Taiwan: <span class="ranking-badge">EU's 13th largest trading partner</span>
                    EU: <span class="ranking-badge">Taiwan's 4th largest partner</span>
                </div>
                <div class="subscores">
                    <div class="subscore">
                        <div class="subscore-label">Economic</div>
                        <div class="subscore-value">7.5</div>
                    </div>
                    <div class="subscore">
                        <div class="subscore-label">Political</div>
                        <div class="subscore-value">6.4</div>
                    </div>
                    <div class="subscore">
                        <div class="subscore-label">Security</div>
                        <div class="subscore-value">5.9</div>
                    </div>
                    <div class="subscore">
                        <div class="subscore-label">Cultural</div>
                        <div class="subscore-value">7.2</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="copyLink()">
                📋 Copy Link
            </button>
            <button class="btn btn-primary" onclick="exportPNG()">
                📸 Export PNG
            </button>
            <div style="position: relative;">
                <button class="btn btn-secondary" onclick="toggleShareMenu()">
                    📤 Share
                </button>
                <div id="shareMenu" class="share-menu">
                    <a href="#" class="share-item" onclick="shareNative(event)">📱 System Share</a>
                    <a href="#" class="share-item" onclick="shareX(event)">𝕏 X (Twitter)</a>
                    <a href="#" class="share-item" onclick="shareLinkedIn(event)">💼 LinkedIn</a>
                    <a href="#" class="share-item" onclick="shareFacebook(event)">📘 Facebook</a>
                </div>
            </div>
        </div>

        <!-- Widget Area -->
        <div id="widget-area">
            
            <!-- Trade & Investment Section -->
            <h2 class="section-header">Trade & Investment</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-title">Total Trade (2025)</div>
                    <div class="stat-value">
                        €73.2<span class="stat-unit">B</span>
                    </div>
                    <div class="stat-change positive">+12% YoY</div>
                    <div class="stat-sublabel">Goods + Services</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-title">Goods Trade</div>
                    <div class="stat-value">
                        €62.1<span class="stat-unit">B</span>
                    </div>
                    <div class="stat-sublabel">85% of total</div>
                </div>
                
                <div class="stat-card green">
                    <div class="stat-title">Services Trade</div>
                    <div class="stat-value">
                        €18<span class="stat-unit">B</span>
                    </div>
                    <div class="stat-change positive">+15% since 2022</div>
                    <div class="stat-sublabel">20% of total volume</div>
                </div>
                
                <div class="stat-card blue">
                    <div class="stat-title">EU FDI in Taiwan</div>
                    <div class="stat-value">
                        €28.4<span class="stat-unit">B</span>
                    </div>
                    <div class="stat-sublabel">Largest foreign investor</div>
                </div>
                
                <div class="stat-card blue">
                    <div class="stat-title">Taiwan FDI in EU</div>
                    <div class="stat-value">
                        €20.7<span class="stat-unit">B</span>
                    </div>
                    <div class="stat-change positive">+808% since 2015</div>
                </div>
                
                <div class="stat-card purple">
                    <div class="stat-title">Semiconductor Trade</div>
                    <div class="stat-value">
                        €14.2<span class="stat-unit">B</span>
                    </div>
                    <div class="stat-sublabel">23% of TW exports</div>
                </div>
            </div>

            <!-- Trade Flow Diagram -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Bilateral Trade Flows (2025)</h3>
                <div class="flow-container">
                    <div class="flow-entity">
                        <div class="flow-flag">🇪🇺</div>
                        <div class="flow-label">European Union</div>
                    </div>
                    
                    <div class="flow-arrows">
                        <div class="flow-arrow">
                            <div class="flow-value">€23.9B</div>
                            <div class="arrow-line"></div>
                            <div class="flow-description">EU Exports to TW</div>
                        </div>
                        <div class="flow-arrow arrow-reverse">
                            <div class="flow-description">TW Exports to EU</div>
                            <div class="arrow-line"></div>
                            <div class="flow-value">€49.3B</div>
                        </div>
                    </div>
                    
                    <div class="flow-entity">
                        <div class="flow-flag">🇹🇼</div>
                        <div class="flow-label">Taiwan</div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 20px; color: #94a3b8; font-size: 13px;">
                    Top EU Exports: Non-electrical machinery (32.7%), Pharmaceuticals, Chemicals<br>
                    Top Taiwan Exports: Integrated circuits (23%), Electronics, Machinery
                </div>
            </div>

            <!-- Charts -->
            <div class="charts-grid">
                <div class="chart-container">
                    <h3 class="chart-title">Bilateral Trade Evolution 2020-2025</h3>
                    <div class="chart-wrapper">
                        <canvas id="tradeChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3 class="chart-title">Investment Screening Frameworks</h3>
                    <div class="chart-wrapper">
                        <canvas id="screeningChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Technology & Critical Sectors -->
            <h2 class="section-header">Technology & Critical Sectors</h2>
            <div class="stats-grid">
                                <div class="stat-card purple">
                    <div class="stat-title">Semiconductor Cooperation</div>
                    <div class="stat-value">
                        ESMC<span class="stat-label">+ forums</span>
                    </div>
                    <div class="stat-sublabel">TSMC-led joint venture &amp; cluster cooperation</div>
                </div>

                
                               <div class="stat-card green">
                    <div class="stat-title">Green Tech Cooperation</div>
                    <div class="stat-value">
                        Active<span class="stat-label">programs</span>
                    </div>
                    <div class="stat-sublabel">Renewable energy, green hydrogen &amp; ETS collaboration</div>
                </div>

                
                <div class="stat-card blue">
                    <div class="stat-title">Digital Economy</div>
                    <div class="stat-value">
                        8<span class="stat-label">agreements</span>
                    </div>
                    <div class="stat-sublabel">Data protection & cybersecurity</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-title">Healthcare Cooperation</div>
                    <div class="stat-value">
                        €2.3<span class="stat-unit">B</span>
                    </div>
                    <div class="stat-sublabel">Pharma & medical devices</div>
                </div>
            </div>

            <!-- Sector Engagement Heatmap -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Sector Engagement Intensity by Year</h3>
                <div class="heatmap-grid">
                    <div class="heatmap-label"></div>
                    <div class="heatmap-label">2021</div>
                    <div class="heatmap-label">2022</div>
                    <div class="heatmap-label">2023</div>
                    <div class="heatmap-label">2024</div>
                    <div class="heatmap-label">2025</div>
                    
                    <div class="heatmap-label">Semiconductors</div>
                    <div class="heatmap-cell intensity-high">78</div>
                    <div class="heatmap-cell intensity-high">82</div>
                    <div class="heatmap-cell intensity-very-high">88</div>
                    <div class="heatmap-cell intensity-very-high">92</div>
                    <div class="heatmap-cell intensity-very-high">95</div>
                    
                    <div class="heatmap-label">Green Technology</div>
                    <div class="heatmap-cell intensity-medium">52</div>
                    <div class="heatmap-cell intensity-medium">61</div>
                    <div class="heatmap-cell intensity-high">70</div>
                    <div class="heatmap-cell intensity-high">78</div>
                    <div class="heatmap-cell intensity-high">84</div>
                    
                    <div class="heatmap-label">Digital Economy</div>
                    <div class="heatmap-cell intensity-low">45</div>
                    <div class="heatmap-cell intensity-medium">54</div>
                    <div class="heatmap-cell intensity-medium">62</div>
                    <div class="heatmap-cell intensity-medium">68</div>
                    <div class="heatmap-cell intensity-high">75</div>
                    
                    <div class="heatmap-label">Healthcare</div>
                    <div class="heatmap-cell intensity-medium">58</div>
                    <div class="heatmap-cell intensity-medium">63</div>
                    <div class="heatmap-cell intensity-high">69</div>
                    <div class="heatmap-cell intensity-high">73</div>
                    <div class="heatmap-cell intensity-high">77</div>
                    
                    <div class="heatmap-label">Cybersecurity</div>
                    <div class="heatmap-cell intensity-low">41</div>
                    <div class="heatmap-cell intensity-low">48</div>
                    <div class="heatmap-cell intensity-medium">56</div>
                    <div class="heatmap-cell intensity-medium">64</div>
                    <div class="heatmap-cell intensity-high">71</div>
                </div>
            </div>

            <!-- Political & Diplomatic Engagement -->
            <h2 class="section-header">Political & Diplomatic Engagement</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-title">Parliamentary Exchanges</div>
                    <div class="stat-value">
                        18<span class="stat-label">visits</span>
                    </div>
                    <div class="stat-sublabel">2024-2025</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-title">Trade & Investment Dialogues</div>
                    <div class="stat-value">
                        3<span class="stat-label">annual sessions</span>
                    </div>
                    <div class="stat-sublabel">Since 2021 upgrade</div>
                </div>
                
                <div class="stat-card green">
                    <div class="stat-title">EU Representations in Taiwan</div>
                    <div class="stat-value">
                        16<span class="stat-label">member states</span>
                    </div>
                </div>
                
                <div class="stat-card green">
                    <div class="stat-title">Taiwan Offices in EU</div>
                    <div class="stat-value">
                        24<span class="stat-label">offices</span>
                    </div>
                    <div class="stat-sublabel">Across 19 member states</div>
                </div>
                
                <div class="stat-card blue">
                    <div class="stat-title">Human Rights Consultations</div>
                    <div class="stat-value">
                        Annual<span class="stat-label">dialogues</span>
                    </div>
                    <div class="stat-sublabel">Labor & gender equality</div>
                </div>
                
                                <div class="stat-card green">
                    <div class="stat-title">Working Holiday</div>
                    <div class="stat-value">
                        12<span class="stat-label">programs</span>
                    </div>
                    <div class="stat-sublabel">Bilateral quotas vary by member state</div>
                </div>

            </div>

            <!-- Member State Engagement -->
            <div class="chart-container full-width">
                <h3 class="chart-title">EU Member State Representations in Taiwan</h3>
                <div class="member-states-grid">
                    <div class="member-state-card active">
                        <div class="member-state-name">Germany</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">France</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Netherlands</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Belgium</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Austria</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Poland</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Czech Rep.</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Slovakia</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Hungary</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Denmark</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Sweden</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Finland</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Italy</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Spain</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Latvia</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card active">
                        <div class="member-state-name">Romania</div>
                        <div class="member-state-indicator">✓ Office</div>
                    </div>
                    <div class="member-state-card">
                        <div class="member-state-name">Ireland</div>
                    </div>
                    <div class="member-state-card">
                        <div class="member-state-name">Portugal</div>
                    </div>
                    <div class="member-state-card">
                        <div class="member-state-name">Greece</div>
                    </div>
                    <div class="member-state-card">
                        <div class="member-state-name">Estonia</div>
                    </div>
                    <div class="member-state-card">
                        <div class="member-state-name">Lithuania</div>
                    </div>
                    <div class="member-state-card">
                        <div class="member-state-name">Slovenia</div>
                    </div>
                </div>
            </div>

            <!-- Policy Engagement -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Engagement by Policy Area (2025)</h3>
                <div class="policy-bars">
                    <div class="policy-item">
                        <div class="policy-label">Semiconductors</div>
                        <div class="policy-bar-track">
                            <div class="policy-bar-fill" style="width: 95%;">95%</div>
                        </div>
                    </div>
                    <div class="policy-item">
                        <div class="policy-label">Green Technology</div>
                        <div class="policy-bar-track">
                            <div class="policy-bar-fill" style="width: 84%;">84%</div>
                        </div>
                    </div>
                    <div class="policy-item">
                        <div class="policy-label">Healthcare</div>
                        <div class="policy-bar-track">
                            <div class="policy-bar-fill" style="width: 77%;">77%</div>
                        </div>
                    </div>
                    <div class="policy-item">
                        <div class="policy-label">Digital Economy</div>
                        <div class="policy-bar-track">
                            <div class="policy-bar-fill" style="width: 75%;">75%</div>
                        </div>
                    </div>
                    <div class="policy-item">
                        <div class="policy-label">Cybersecurity</div>
                        <div class="policy-bar-track">
                            <div class="policy-bar-fill" style="width: 71%;">71%</div>
                        </div>
                    </div>
                    <div class="policy-item">
                        <div class="policy-label">Higher Education</div>
                        <div class="policy-bar-track">
                            <div class="policy-bar-fill" style="width: 68%;">68%</div>
                        </div>
                    </div>
                    <div class="policy-item">
                        <div class="policy-label">Labor Rights</div>
                        <div class="policy-bar-track">
                            <div class="policy-bar-fill" style="width: 62%;">62%</div>
                        </div>
                    </div>
                    <div class="policy-item">
                        <div class="policy-label">Security Dialogue</div>
                        <div class="policy-bar-track">
                            <div class="policy-bar-fill" style="width: 54%;">54%</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Risk & Resilience -->
            <h2 class="section-header">Risk & Resilience Indicators</h2>
            <div class="risk-grid">
                <div class="risk-card high">
                    <div class="risk-title">Supply Chain Dependency</div>
                    <div class="risk-level">High Risk</div>
                    <div class="risk-description">90% of advanced chips from Taiwan; de-risking in progress via EU Chips Act</div>
                </div>
                
                <div class="risk-card medium">
                    <div class="risk-title">Cross-Strait Tensions</div>
                    <div class="risk-level">Medium Risk</div>
                    <div class="risk-description">Geopolitical instability impacts €73B trade relationship and critical supply chains</div>
                </div>
                
                <div class="risk-card low">
                    <div class="risk-title">Economic Security</div>
                    <div class="risk-level">Low Risk</div>
                    <div class="risk-description">4 investment screening frameworks active; export controls strengthened</div>
                </div>
            </div>

            <!-- Cultural Cooperation -->
            <h2 class="section-header">Cultural & People-to-People</h2>
            <div class="stats-grid">
                <div class="stat-card purple">
                    <div class="stat-title">Cultural Projects</div>
                    <div class="stat-value">
                        25<span class="stat-label">active</span>
                    </div>
                    <div class="stat-sublabel">Arts, heritage, education</div>
                </div>
                
                                <div class="stat-card purple">
                    <div class="stat-title">Student Exchanges</div>
                    <div class="stat-value">
                        ~3,800<span class="stat-label">annually</span>
                    </div>
                    <div class="stat-sublabel">Taiwanese students in Europe (2018 data)</div>
                </div>

                
                <div class="stat-card green">
                    <div class="stat-title">Visa-Free Travel</div>
                    <div class="stat-value">
                        Since 2011
                    </div>
                    <div class="stat-sublabel">Schengen visa waiver</div>
                </div>
                
                <div class="stat-card green">
                    <div class="stat-title">Working Holiday</div>
                    <div class="stat-value">
                        2,800<span class="stat-label">participants</span>
                    </div>
                    <div class="stat-sublabel">12 EU member states</div>
                </div>
            </div>
                        <!-- Green Tech Details -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Green Technology Cooperation Details</h3>
                <div style="padding: 20px; background: rgba(15, 23, 42, 0.8); border-radius: 8px; color: #cbd5e1; font-size: 14px; line-height: 1.8;">
                    <p style="margin-bottom: 12px;">There is no specific number for "EU-Taiwan green tech projects," but the two regions are collaborating in several key areas, including renewable energy technology and green hydrogen. The EU is a potential partner for Taiwan, which is looking to accelerate its renewable energy development and has recently seen a significant increase in its own investment in EU green technology projects.</p>
                    <p><strong style="color: #10b981;">Examples of cooperation include:</strong> EU-Taiwan Hydrogen Roundtable and potential collaboration on carbon market mechanisms, like the EU's Emissions Trading Scheme (ETS).</p>
                </div>
            </div>
            <!-- Semiconductor Details -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Semiconductor Cooperation Details</h3>
                <div style="padding: 20px; background: rgba(15, 23, 42, 0.8); border-radius: 8px; color: #cbd5e1; font-size: 14px; line-height: 1.8;">
                    <p style="margin-bottom: 12px;">There is one major EU-Taiwan semiconductor project, the <strong style="color: #8b5cf6;">European Semiconductor Manufacturing Company (ESMC)</strong>, a joint venture led by TSMC in Dresden, Germany.</p>
                    <p>Additionally, there are ongoing discussions and forums for broader EU-Taiwan semiconductor cooperation, including a 2023 forum that saw a large delegation from the EU's semiconductor clusters visit Taiwan.</p>
                </div>
            </div>
            <!-- Student Exchange Details -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Student Exchange Details</h3>
                <div style="padding: 20px; background: rgba(15, 23, 42, 0.8); border-radius: 8px; color: #cbd5e1; font-size: 14px; line-height: 1.8;">
                    <p style="margin-bottom: 12px;">There is no single, official annual figure for EU-Taiwan student exchanges, as numbers vary by exchange program and institution.</p>
                    <p>Data from 2018 shows that approximately <strong style="color: #8b5cf6;">3,814 Taiwanese students</strong> studied in Europe that year. Specific bilateral agreements, like partnerships between Goethe University Frankfurt and Taiwanese universities, facilitate exchanges each semester. Erasmus+ data (2019) shows approximately 784 annual participants in both directions.</p>
                </div>
            </div>
            <!-- Working Holiday Details -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Working Holiday Program Details</h3>
                <div style="padding: 20px; background: rgba(15, 23, 42, 0.8); border-radius: 8px; color: #cbd5e1; font-size: 14px; line-height: 1.8;">
                    <p style="margin-bottom: 12px;">The total annual number of EU-Taiwan working holiday participants depends on the specific agreement between Taiwan and each individual EU country, as quotas are set on a bilateral basis.</p>
                    <p><strong style="color: #10b981;">Example quotas:</strong> Taiwan-Luxembourg: 40 participants per year; Belgium: up to 200 Taiwanese participants per year; Taiwan-Austria: combined quota of 75 participants. Total estimated annual capacity across all 12 EU member states ranges between 800-1,500 participants.</p>
                </div>
            </div>


            <!-- Timeline -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Key Milestones in EU-Taiwan Relations</h3>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">
                            Schengen Visa Waiver<br>
                            <span class="timeline-year">2011</span>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">
                            Trade Dialogue Upgrade<br>
                            <span class="timeline-year">2021</span>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">
                            EP Group Visit<br>
                            <span class="timeline-year">2022</span>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">
                            EP Resolution<br>
                            <span class="timeline-year">2023</span>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">
                            EUTIT Forum<br>
                            <span class="timeline-year">2023</span>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">
                            Chips Act<br>
                            <span class="timeline-year">2024</span>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">
                            Investment Screening<br>
                            <span class="timeline-year">2024</span>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">
                            Enhanced Screening<br>
                            <span class="timeline-year">2025</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Comparative Analysis -->
            <div class="chart-container full-width">
                <h3 class="chart-title">EU Trade Relations: Comparative Context</h3>
                <div class="chart-wrapper">
                    <canvas id="comparativeChart"></canvas>
                </div>
            </div>
            <!-- Methodology & Scoring -->
            <h2 class="section-header">Methodology &amp; Assessment Framework</h2>
            
            <div class="chart-container full-width">
                <h3 class="chart-title">Iselin Group Engagement Assessment Methodology</h3>
                <div style="padding: 24px; background: rgba(15, 23, 42, 0.8); border-radius: 8px; color: #cbd5e1; font-size: 14px; line-height: 1.8;">
                    <p style="margin-bottom: 16px; font-weight: 600; color: #fbbf24;">
                        The engagement scores and overall rating presented in this tracker represent proprietary assessments by Iselin Group based on comprehensive analysis of publicly available data, official statements, and bilateral activities.
                    </p>
                    
                    <h4 style="color: #f1f5f9; font-size: 16px; margin: 20px 0 12px 0;">Overall Score Calculation (6.8/10)</h4>
                    <p style="margin-bottom: 12px;">The overall engagement score is derived from four equally-weighted pillars:</p>
                    <ul style="margin-left: 20px; margin-bottom: 16px;">
                        <li style="margin-bottom: 8px;"><strong style="color: #3b82f6;">Economic Integration (7.5/10):</strong> Trade volume growth, FDI stocks, services trade expansion, and investment screening frameworks</li>
                        <li style="margin-bottom: 8px;"><strong style="color: #3b82f6;">Political Dialogue (6.4/10):</strong> Parliamentary exchanges, ministerial visits, Trade &amp; Investment Dialogue sessions, and representation networks</li>
                        <li style="margin-bottom: 8px;"><strong style="color: #3b82f6;">Security Cooperation (5.9/10):</strong> Cybersecurity collaboration, supply chain resilience initiatives, and strategic technology partnerships</li>
                        <li style="margin-bottom: 8px;"><strong style="color: #3b82f6;">Cultural Exchange (7.2/10):</strong> Student mobility, working holiday programs, visa facilitation, and cultural projects</li>
                    </ul>
                    
                    <h4 style="color: #f1f5f9; font-size: 16px; margin: 20px 0 12px 0;">Sector Engagement Intensity (Policy Area Scores)</h4>
                    <p style="margin-bottom: 12px;">Percentage scores for individual sectors (Semiconductors 95%, Green Tech 84%, etc.) are calculated using a composite index measuring:</p>
                    <ul style="margin-left: 20px; margin-bottom: 16px;">
                        <li style="margin-bottom: 6px;">Volume of bilateral activity (forums, working groups, joint statements)</li>
                        <li style="margin-bottom: 6px;">Trade and investment flows in the specific sector</li>
                        <li style="margin-bottom: 6px;">Number of institutional mechanisms (dialogues, MOUs, partnerships)</li>
                        <li style="margin-bottom: 6px;">Frequency of high-level engagement (ministerial, parliamentary, technical)</li>
                        <li style="margin-bottom: 6px;">Strategic importance as reflected in official policy documents</li>
                    </ul>
                    
                    <h4 style="color: #f1f5f9; font-size: 16px; margin: 20px 0 12px 0;">Heatmap Intensity Methodology</h4>
                    <p style="margin-bottom: 12px;">Year-over-year intensity scores (2021-2025) track the evolution of engagement across sectors based on:</p>
                    <ul style="margin-left: 20px; margin-bottom: 16px;">
                        <li style="margin-bottom: 6px;">Number of documented bilateral events and initiatives per sector per year</li>
                        <li style="margin-bottom: 6px;">Official announcements, press releases, and policy statements</li>
                        <li style="margin-bottom: 6px;">Trade data growth rates in sector-specific categories</li>
                        <li style="margin-bottom: 6px;">Media coverage and public discourse analysis</li>
                    </ul>
                    
                    <h4 style="color: #f1f5f9; font-size: 16px; margin: 20px 0 12px 0;">Risk Assessment Framework</h4>
                    <p style="margin-bottom: 12px;">Risk levels (High/Medium/Low) represent Iselin Group's assessment of vulnerabilities and dependencies:</p>
                    <ul style="margin-left: 20px; margin-bottom: 16px;">
                        <li style="margin-bottom: 8px;"><strong style="color: #ef4444;">High Risk - Supply Chain Dependency:</strong> 90% of advanced semiconductors from Taiwan (confirmed by EEAS data); limited alternative sources; critical for EU digital and green transitions</li>
                        <li style="margin-bottom: 8px;"><strong style="color: #fbbf24;">Medium Risk - Cross-Strait Tensions:</strong> Geopolitical instability could disrupt €73B trade relationship and critical technology supply chains</li>
                        <li style="margin-bottom: 8px;"><strong style="color: #10b981;">Low Risk - Economic Security:</strong> Four active investment screening frameworks; strengthened export controls; diversification efforts underway (EU Chips Act)</li>
                    </ul>
                    
                    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                        <p style="font-size: 12px; color: #94a3b8; font-style: italic;">
                            <strong>Disclaimer:</strong> All assessments, scores, and ratings in this tracker represent independent analysis by Iselin Group. While based on publicly available official data and reports, the interpretive framework and scoring methodology are proprietary. Users should consult primary sources for official policy positions. Last updated: October 14, 2025.
                        </p>
                    </div>
                </div>
            </div>

                     <!-- Data Sources -->
            <div class="sources-section">
                <div class="sources-card">
                    <h3 class="chart-title">Primary Data Sources</h3>
                    <ul class="sources-list">
                        <li class="source-item">European Commission (DG Trade)</li>
                        <li class="source-item">European Parliament (INTA, AFET)</li>
                        <li class="source-item">Taiwan Ministry of Foreign Affairs</li>
                        <li class="source-item">Taiwan Ministry of Economic Affairs</li>
                        <li class="source-item">European External Action Service (EEAS)</li>
                        <li class="source-item">Eurostat Trade Statistics</li>
                        <li class="source-item">Erasmus+ Program Data</li>
                        <li class="source-item">Official bilateral statements &amp; press releases</li>
                    </ul>
                </div>
                
                <div class="sources-card">
                    <h3 class="chart-title">Analysis &amp; <span class="methodology-highlight">Assessment</span></h3>
                    <ul class="sources-list">
                        <li class="source-item">Iselin Group proprietary scoring methodology</li>
                        <li class="source-item">Quantitative trade &amp; investment analysis</li>
                        <li class="source-item">Diplomatic engagement tracking</li>
                        <li class="source-item">Policy framework evaluation</li>
                        <li class="source-item">Sector-specific activity monitoring</li>
                        <li class="source-item">Risk &amp; resilience assessment framework</li>
                        <li class="source-item">Comparative benchmarking against EU-Asia partnerships</li>
                        <li class="source-item"><em style="color: #fbbf24;">See full methodology section above</em></li>
                    </ul>
                </div>
            </div>


        </div>
    </div>

    <!-- Bottom Brand Bar -->
    <div class="brand-bar-bottom">
        <div class="bottom-content">
            <div class="bottom-title">Iselin Group - Strategic Consulting</div>
            <div class="bottom-meta">
                © Iselin Group. "EU-Taiwan Relations Tracker" — brian.iselin(@)iselingroup.com.
            </div>
            <div class="ip-notice">
                The underlying decision‑integrity model, logic, and UI are proprietary to Iselin Group and may not be reproduced, adapted, or deployed in whole or in part without prior written consent; all rights reserved.
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script>
        // Chart.js Trade Evolution Chart
        const ctx1 = document.getElementById('tradeChart').getContext('2d');
        const tradeChart = new Chart(ctx1, {
            type: 'line',
            data: {
                labels: ['2020', '2021', '2022', '2023', '2024', '2025'],
                datasets: [
                    {
                        label: 'Total Trade',
                        data: [56.2, 61.8, 66.4, 68.9, 71.2, 73.2],
                        borderColor: '#f59e0b',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        tension: 0.4,
                        borderWidth: 3,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    },
                    {
                        label: 'Goods',
                        data: [48.3, 52.7, 55.8, 58.6, 60.5, 62.1],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        borderWidth: 3,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    },
                    {
                        label: 'Services',
                        data: [7.9, 9.1, 10.6, 10.3, 10.7, 11.1],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4,
                        borderWidth: 3,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'bottom',
                        labels: {
                            color: '#cbd5e1',
                            padding: 15,
                            font: {
                                size: 12,
                                weight: '600'
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.95)',
                        titleColor: '#f1f5f9',
                        bodyColor: '#cbd5e1',
                        borderColor: 'rgba(245, 158, 11, 0.5)',
                        borderWidth: 1,
                        padding: 12,
                        displayColors: true,
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': €' + context.parsed.y + 'B';
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.05)',
                            drawBorder: false
                        },
                        ticks: {
                            color: '#94a3b8',
                            font: {
                                size: 11,
                                weight: '600'
                            }
                        }
                    },
                    y: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.05)',
                            drawBorder: false
                        },
                        ticks: {
                            color: '#94a3b8',
                            font: {
                                size: 11,
                                weight: '600'
                            },
                            callback: function(value) {
                                return '€' + value + 'B';
                            }
                        }
                    }
                }
            }
        });

        // Investment Screening Chart
        const ctx2 = document.getElementById('screeningChart').getContext('2d');
        const screeningChart = new Chart(ctx2, {
            type: 'bar',
            data: {
                labels: ['2020', '2021', '2022', '2023', '2024', '2025'],
                datasets: [
                    {
                        label: 'Active Frameworks',
                        data: [1, 2, 2, 3, 4, 4],
                        backgroundColor: 'rgba(245, 158, 11, 0.8)',
                        borderColor: '#f59e0b',
                        borderWidth: 2,
                        borderRadius: 6
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.95)',
                        titleColor: '#f1f5f9',
                        bodyColor: '#cbd5e1',
                        borderColor: 'rgba(245, 158, 11, 0.5)',
                        borderWidth: 1,
                        padding: 12
                    }
                },
                scales: {
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.05)',
                            drawBorder: false
                        },
                        ticks: {
                            color: '#94a3b8',
                            font: {
                                size: 11,
                                weight: '600'
                            }
                        }
                    },
                    y: {
                        beginAtZero: true,
                        max: 5,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.05)',
                            drawBorder: false
                        },
                        ticks: {
                            color: '#94a3b8',
                            font: {
                                size: 11,
                                weight: '600'
                            },
                            stepSize: 1
                        }
                    }
                }
            }
        });

        // Comparative Analysis Chart
        const ctx3 = document.getElementById('comparativeChart').getContext('2d');
        const comparativeChart = new Chart(ctx3, {
            type: 'bar',
            data: {
                labels: ['EU-Japan', 'EU-South Korea', 'EU-Taiwan', 'EU-Singapore'],
                datasets: [
                    {
                        label: 'Trade Volume (€B)',
                        data: [145.3, 98.7, 73.2, 67.4],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(139, 92, 246, 0.8)',
                            'rgba(245, 158, 11, 0.8)',
                            'rgba(16, 185, 129, 0.8)'
                        ],
                        borderColor: [
                            '#3b82f6',
                            '#8b5cf6',
                            '#f59e0b',
                            '#10b981'
                        ],
                        borderWidth: 2,
                        borderRadius: 8
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.95)',
                        titleColor: '#f1f5f9',
                        bodyColor: '#cbd5e1',
                        borderColor: 'rgba(245, 158, 11, 0.5)',
                        borderWidth: 1,
                        padding: 12,
                        callbacks: {
                            label: function(context) {
                                return 'Trade Volume: €' + context.parsed.x + 'B';
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.05)',
                            drawBorder: false
                        },
                        ticks: {
                            color: '#94a3b8',
                            font: {
                                size: 11,
                                weight: '600'
                            },
                            callback: function(value) {
                                return '€' + value + 'B';
                            }
                        }
                    },
                    y: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.05)',
                            drawBorder: false
                        },
                        ticks: {
                            color: '#94a3b8',
                            font: {
                                size: 12,
                                weight: '600'
                            }
                        }
                    }
                }
            }
        });

        // State Management via URL Hash
        function getStateFromHash() {
            const hash = window.location.hash.substring(1);
            if (!hash) return null;
            
            try {
                return JSON.parse(decodeURIComponent(hash));
            } catch (e) {
                return null;
            }
        }

        function setStateToHash(state) {
            const encoded = encodeURIComponent(JSON.stringify(state));
            window.location.hash = encoded;
        }

        function getCurrentState() {
            return {
                totalTrade: 73.2,
                goodsTrade: 62.1,
                servicesTrade: 18.0,
                euFDI: 28.4,
                taiwanFDI: 20.7,
                semiconductorTrade: 14.2,
                score: 6.8,
                economicScore: 7.5,
                politicalScore: 6.4,
                securityScore: 5.9,
                culturalScore: 7.2,
                timestamp: new Date().toISOString()
            };
        }

        // Initialize state from hash on load
        window.addEventListener('load', function() {
            const savedState = getStateFromHash();
            if (savedState) {
                console.log('Restored state:', savedState);
            }
        });

        // Copy Link Function
        function copyLink() {
            const state = getCurrentState();
            setStateToHash(state);
            
            const url = window.location.href;
            
            navigator.clipboard.writeText(url).then(function() {
                showToast('Link copied to clipboard!');
            }).catch(function(err) {
                showToast('Failed to copy link', 'error');
            });
        }

        // Export PNG Function
        function exportPNG() {
            const element = document.getElementById('widget-area');
            
            showToast('Generating PNG...');
            
            html2canvas(element, {
                backgroundColor: null,
                scale: 2,
                useCORS: true,
                logging: false,
                windowWidth: element.scrollWidth,
                windowHeight: element.scrollHeight
            }).then(function(canvas) {
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.download = 'eu-taiwan-tracker.png';
                    link.href = url;
                    link.click();
                    URL.revokeObjectURL(url);
                    showToast('PNG exported successfully!');
                });
            }).catch(function(error) {
                console.error('Export failed:', error);
                showToast('Export failed', 'error');
            });
        }

        // Share Functions
        function toggleShareMenu() {
            const menu = document.getElementById('shareMenu');
            menu.classList.toggle('show');
            
            if (menu.classList.contains('show')) {
                setTimeout(() => {
                    document.addEventListener('click', closeShareMenu);
                }, 10);
            }
        }

        function closeShareMenu(e) {
            const menu = document.getElementById('shareMenu');
            if (!e.target.closest('#shareMenu') && !e.target.closest('.btn-secondary')) {
                menu.classList.remove('show');
                document.removeEventListener('click', closeShareMenu);
            }
        }

        function shareNative(e) {
            e.preventDefault();
            const state = getCurrentState();
            setStateToHash(state);
            
            const url = window.location.href;
            const text = 'EU-Taiwan Relations Tracker live scenario snapshot';
            
            if (navigator.share) {
                navigator.share({
                    title: 'EU-Taiwan Relations Tracker',
                    text: text,
                    url: url
                }).then(() => {
                    showToast('Shared successfully!');
                }).catch((error) => {
                    if (error.name !== 'AbortError') {
                        console.error('Share failed:', error);
                    }
                });
            } else {
                showToast('Native sharing not supported', 'error');
            }
        }

        function shareX(e) {
            e.preventDefault();
            const state = getCurrentState();
            setStateToHash(state);
            
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('EU-Taiwan Relations Tracker live scenario snapshot');
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
        }

        function shareLinkedIn(e) {
            e.preventDefault();
            const state = getCurrentState();
            setStateToHash(state);
            
            const url = encodeURIComponent(window.location.href);
            window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${url}`, '_blank');
        }

        function shareFacebook(e) {
            e.preventDefault();
            const state = getCurrentState();
            setStateToHash(state);
            
            const url = encodeURIComponent(window.location.href);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
        }

        // Toast Notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.background = type === 'error' ? '#ef4444' : '#10b981';
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Listen for hash changes
        window.addEventListener('hashchange', function() {
            const state = getStateFromHash();
            if (state) {
                console.log('State updated from hash:', state);
            }
        });
    </script>
</body>
</html>
