<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>EU–Taiwan Relations: State of Play Dashboard</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<style>
  :root{
    --bg:#08131f;
    --card:#0f1e33;
    --ink:#f2f7ff;
    --muted:#9fc2ff;
    --accent:#5ad1ff;
    --accent2:#ff6ba6;
    --accent3:#53e3a4;
    --accent4:#ffd86b;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    background: radial-gradient(1200px 800px at 10% -10%, #1b2a6a33, transparent),
                radial-gradient(1000px 700px at 110% 10%, #6fffff22, transparent),
                var(--bg);
    color:var(--ink);
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  }
  header{
    padding:28px 20px 8px;
    display:flex;align-items:center;justify-content:space-between;gap:16px;
    position:sticky;top:0;background:linear-gradient(180deg, rgba(8,19,31,0.9), rgba(8,19,31,0.5), transparent);
    backdrop-filter: blur(8px);
    z-index:10;
  }
  .brand{display:flex;align-items:center;gap:14px}
  .blob{
    width:36px;height:36px;border-radius:14px;
    background: conic-gradient(from 210deg, var(--accent), var(--accent2), var(--accent3), var(--accent4), var(--accent));
    box-shadow: 0 0 24px #6cffff88, inset 0 0 24px #ffffff11;
  }
  .title{font-weight:800;letter-spacing:.2px;font-size:1.1rem;line-height:1.1}
  .subtitle{font-size:.9rem;color:var(--muted)}
  .grid{
    display:grid;gap:16px;padding:16px;grid-template-columns:repeat(12,1fr);max-width:1400px;margin:0 auto;
  }
  .card{
    background: linear-gradient(180deg, #0f1e33, #0b182a);
    border:1px solid #1e2b57;
    border-radius:16px;padding:16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.03);
  }
  .card h3{margin:0 0 10px;font-size:1rem;font-weight:800;letter-spacing:.3px}
  .kpis{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
  .kpi{
    grid-column: span 4;
    padding:16px;border-radius:14px;background:
      radial-gradient(600px 300px at 0% 0%, #6cffff14, transparent),
      linear-gradient(180deg, #10233b, #0b182a);
    border:1px solid #213066;
  }
  .kpi .label{font-size:.8rem;color:var(--muted);font-weight:600}
  .kpi .value{font-size:1.8rem;font-weight:800;margin-top:6px}
  .span-6{grid-column:span 6}
  .span-4{grid-column:span 4}
  .span-8{grid-column:span 8}
  .span-12{grid-column:span 12}
  .pill{
    display:inline-flex;align-items:center;gap:8px;
    border:1px solid #27408b;border-radius:999px;padding:6px 10px;font-size:.8rem;color:#bed0ff;
    background:linear-gradient(180deg,#16204a,#0f1732);
  }
  .row{display:flex;gap:10px;flex-wrap:wrap}
  a{color:#a6d0ff;text-decoration:underline}
  footer{max-width:1400px;margin:20px auto 60px;padding:0 16px;color:#bcd2ffcc}
  .small{font-size:.85rem}
  .legend-dot{width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:6px}
  .note{font-size:.8rem;color:#cfe2ffaa}
  .btn{
      appearance:none;border:none;background:linear-gradient(180deg,#2b6fff,#1b57e6);
      color:white;padding:8px 12px;border-radius:10px;font-weight:700;cursor:pointer;
      box-shadow: 0 6px 20px rgba(43,111,255,.4);
  }
  @media (max-width: 900px){
    .kpi{grid-column:span 12}
    .span-6,.span-4,.span-8{grid-column:span 12}
  }
</style>
</head>
<body>
<header>
  <div class="brand">
    <div class="blob"></div>
    <div>
      <div class="title">EU–Taiwan Relations — State of Play</div>
      <div class="subtitle">Trade, tech interdependence & economic security signals</div>
    </div>
  </div>
  <div class="row">
    <span class="pill">Updated: <span id="updatedAt"></span></span>
    <button class="btn" id="exportBtn" title="Download a snapshot of this dashboard as a PNG">Export PNG</button>
  </div>
</header>

<main class="grid">
  <!-- KPI STRIP -->
  <section class="card span-12">
    <div class="row" style="justify-content:space-between;align-items:center;margin-bottom:10px">
      <h3>2024 Snapshot (Goods Trade)</h3>
      <span class="pill"><span class="legend-dot" style="background:var(--accent)"></span>DG TRADE / Eurostat</span>
    </div>
    <div class="kpis" id="kpiStrip"></div>
    <div class="note" style="margin-top:8px">Figures refer to EU external trade in goods with Taiwan in calendar year 2024 (Eurostat/Commission).</div>
  </section>

  <!-- TRADE PIE + DEFICIT -->
  <section class="card span-6">
    <h3>EU Goods Trade with Taiwan (2024)</h3>
    <canvas id="tradePie" height="200"></canvas>
    <div class="row" style="margin-top:10px">
      <span class="pill"><span class="legend-dot" style="background:var(--accent3)"></span>Exports</span>
      <span class="pill"><span class="legend-dot" style="background:var(--accent2)"></span>Imports</span>
      <span class="pill"><span class="legend-dot" style="background:var(--accent4)"></span>Deficit</span>
    </div>
    <div class="note" style="margin-top:8px">Deficit = Imports − Exports</div>
  </section>

  <!-- PARTNER RANK + HIGH-TECH SHARE -->
  <section class="card span-6">
    <h3>Partner rank & high‑tech footprint</h3>
    <div class="row" style="gap:16px;flex-wrap:wrap">
      <div class="kpi" style="flex:1 1 220px">
        <div class="label">Taiwan’s rank among EU partners (2024)</div>
        <div class="value">13<sup>th</sup></div>
      </div>
      <div class="kpi" style="flex:1 1 220px">
        <div class="label">Taiwan’s share of EU high‑tech imports (2024)</div>
        <div class="value">6%</div>
      </div>
      <div class="kpi" style="flex:1 1 220px">
        <div class="label">Electronics/telecoms share of EU high‑tech imports from Taiwan</div>
        <div class="value">52%</div>
      </div>
    </div>
    <div class="note" style="margin-top:8px">Eurostat: Taiwan supplied ~6% of EU high‑tech imports in 2024; over half were electronics/telecoms.</div>
  </section>

  <!-- TRADE TREND -->
  <section class="card span-8">
    <div class="row" style="justify-content:space-between;align-items:center;">
      <h3>EU–Taiwan goods trade, 2019–2024</h3>
      <span class="pill">DG TRADE factsheet</span>
    </div>
    <canvas id="trendLine" height="240"></canvas>
    <div class="note">Both imports and exports expanded strongly in 2021–2022, then moderated through 2024; the EU ran a persistent goods deficit.</div>
  </section>

  <!-- ECONOMIC SECURITY / POLICY HEAT -->
  <section class="card span-4">
    <h3>Policy Heat (illustrative)</h3>
    <canvas id="policyGauge" height="220"></canvas>
    <div class="note">Index blends EU economic‑security posture (chips cooperation, anti‑coercion tool readiness, export controls coordination) relevant to Taiwan. (0–100)</div>
  </section>

  <!-- INVESTMENT SNAPSHOT -->
  <section class="card span-12">
    <div class="row" style="justify-content:space-between;align-items:center;">
      <h3>Investment snapshot</h3>
      <span class="pill">Academic/official sources</span>
    </div>
    <div class="row" style="gap:16px;flex-wrap:wrap">
      <div class="kpi" style="flex:1 1 240px">
        <div class="label">EU → Taiwan: main FDI source</div>
        <div class="value">EU #1</div>
      </div>
      <div class="kpi" style="flex:1 1 240px">
        <div class="label">Bilateral FTA</div>
        <div class="value">None</div>
      </div>
      <div class="kpi" style="flex:1 1 240px">
        <div class="label">Semiconductor ties</div>
        <div class="value">Strategic</div>
      </div>
    </div>
    <div class="note">EU is Taiwan’s largest source of FDI; no EU–Taiwan FTA; cooperation deepening around chips and resilient supply chains.</div>
  </section>

  <!-- NOTES -->
  <section class="card span-12">
    <h3>How to update</h3>
    <div class="small">
      Use the inline data editor below to paste fresh values (Eurostat DG TRADE factsheets; Eurostat high‑tech article; EP Think Tank; Reuters statements on EU–Taiwan cooperation). The charts will update instantly in your browser.
    </div>
    <textarea id="dataEditor" class="card" style="width:100%;min-height:180px;margin-top:10px;font-family:ui-monospace,Menlo,Consolas,monospace;background:#0b1228;color:#cfe2ff;border-color:#223266"></textarea>
    <div class="row" style="margin-top:8px">
      <button class="btn" id="applyBtn">Apply JSON</button>
      <span class="note">If something breaks, refresh the page to restore defaults.</span>
    </div>
  </section>
</main>

<footer>
  <div class="small">
    <strong>Sources (latest available):</strong>
    <div>• European Commission (DG TRADE) country page & factsheet: EU–Taiwan trade in goods 2024 (imports €43.3 bn; exports €28.6 bn; total €72.0 bn; deficit €14.7 bn; Taiwan ranked 13th; EU is Taiwan’s 4th‑largest partner).</div>
    <div>• Eurostat news article (24 Sep 2025): EU high‑tech imports by partner—Taiwan 6% (€26 bn), with 52% electronics/telecoms share.</div>
    <div>• EP Think Tank briefing (2024) on EU–Taiwan trade context and deficit trend.</div>
    <div>• Reuters (Nov 2024): calls for deeper EU–Taiwan economic partnership (chips & supply chain security focus).</div>
  </div>
</footer>

<script>
// ------------------- DATA (EDITABLE) -------------------
const DATA = {
  meta: { updatedAt: new Date().toLocaleDateString(undefined,{year:'numeric',month:'short',day:'2-digit'}) },
  trade2024: {
    exportsBn: 28.623, // € bn
    importsBn: 43.331, // € bn
    totalBn: 71.954,   // € bn
    deficitBn: 14.707  // € bn
  },
  partnerRank2024: 13,
  highTech: {
    taiwanSharePct: 6,           // Taiwan share of EU high-tech imports, 2024
    twElectronicsSharePct: 52    // Electronics/telecoms share within EU high-tech imports from Taiwan
  },
  trend: {
    years: [2019, 2020, 2021, 2022, 2023, 2024],
    importsBn: [27.406, 26.464, 35.629, 49.406, 47.806, 43.331],
    exportsBn: [23.573, 22.920, 28.432, 35.035, 30.419, 28.623]
  },
  policy: {
    heatIndex: 58 // illustrative (0-100) – adjust as policy stance evolves
  },
  investment: {
    euIsTopFDISource: true,
    ftaExists: false,
    semiconductorTies: "Strategic"
  }
};

// ------------------- UTIL -------------------
const fmt = (n) => new Intl.NumberFormat(undefined,{maximumFractionDigits:1}).format(n);
const euro = (n) => "€" + fmt(n) + "bn";

document.getElementById('updatedAt').textContent = DATA.meta.updatedAt;
const editor = document.getElementById('dataEditor');
editor.value = JSON.stringify(DATA, null, 2);

// KPIs
const kpiHost = document.getElementById('kpiStrip');
const kpis = [
  { label: "Exports to Taiwan (goods, 2024)", value: euro(DATA.trade2024.exportsBn) },
  { label: "Imports from Taiwan (goods, 2024)", value: euro(DATA.trade2024.importsBn) },
  { label: "Trade Balance (deficit, 2024)", value: "–" + euro(DATA.trade2024.deficitBn) },
  { label: "Total goods trade (2024)", value: euro(DATA.trade2024.totalBn) },
  { label: "Partner rank (2024)", value: "#" + DATA.partnerRank2024 },
  { label: "High‑tech import share from TW", value: DATA.highTech.taiwanSharePct + "%" }
];
kpis.forEach(k=>{
  const el = document.createElement('div');
  el.className = 'kpi';
  el.innerHTML = `<div class="label">${k.label}</div><div class="value">${k.value}</div>`;
  kpiHost.appendChild(el);
});

// TRADE PIE
const tradePie = new Chart(document.getElementById('tradePie'), {
  type:'doughnut',
  data:{
    labels:['Exports','Imports','Deficit'],
    datasets:[{
      data:[DATA.trade2024.exportsBn, DATA.trade2024.importsBn, DATA.trade2024.deficitBn],
      backgroundColor:['#53e3a4','#ff6ba6','#ffd86b22'],
      hoverOffset:8,
      borderWidth:0
    }]
  },
  options:{ plugins:{ legend:{ display:false } }, cutout:'60%' }
});

// POLICY Heat (semi‑gauge)
new Chart(document.getElementById('policyGauge'), {
  type:'doughnut',
  data:{
    labels:['Policy heat','Headroom'],
    datasets:[{
      data:[DATA.policy.heatIndex, 100-DATA.policy.heatIndex],
      backgroundColor:['#ffd86b','#243b7a'],
      borderWidth:0
    }]
  },
  options:{ rotation:-90, circumference:180, plugins:{legend:{display:false}, tooltip:{enabled:false}} }
});

// TRADE TREND
new Chart(document.getElementById('trendLine'), {
  type:'line',
  data:{
    labels: DATA.trend.years,
    datasets:[
      { label:'Imports (EU from Taiwan)', data: DATA.trend.importsBn, tension:.35, fill:true,
        backgroundColor:'#5ad1ff22', borderColor:'#5ad1ff', borderWidth:2, pointRadius:3 },
      { label:'Exports (EU to Taiwan)', data: DATA.trend.exportsBn, tension:.35, fill:true,
        backgroundColor:'#53e3a422', borderColor:'#53e3a4', borderWidth:2, pointRadius:3 }
    ]
  },
  options:{
    plugins:{ legend:{ display:true, labels:{ color:'#e8f0ff' } } },
    scales:{
      y:{ grid:{color:'#28407a55'}, ticks:{ color:'#cfe2ff' }},
      x:{ ticks:{ color:'#cfe2ff' }}
    }
  }
});

// Apply JSON editor
document.getElementById('applyBtn').addEventListener('click', ()=>{
  try{
    const obj = JSON.parse(editor.value);
    localStorage.setItem('euTWdata', editor.value);
    location.reload();
  }catch(e){
    alert("JSON error: " + e.message);
  }
});

// Restore from localStorage if present
const saved = localStorage.getItem('euTWdata');
if(saved){
  try{ editor.value = saved; }catch{}
}

// Export PNG via html2canvas
const exportBtn = document.getElementById('exportBtn');
(function addExporter(){
  const s = document.createElement('script');
  s.src = "https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js";
  s.onload = () => {
    exportBtn.addEventListener('click', async ()=>{
      const el = document.body;
      const canvas = await html2canvas(el,{backgroundColor:'#08131f',scale:2});
      const link = document.createElement('a');
      link.download = 'eu-taiwan-dashboard.png';
      link.href = canvas.toDataURL();
      link.click();
    });
  };
  document.head.appendChild(s);
})();
</script>
</body>
</html>
