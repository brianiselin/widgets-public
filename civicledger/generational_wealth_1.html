<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Productivity–Pay–Wealth Gap | The Civic Ledger</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        :root {
            --cl-bg: #050816;
            --cl-card: #0b1120;
            --cl-border: #1f2937;
            --cl-text-main: #e5e7eb;
            --cl-text-muted: #9ca3af;
            --cl-prod: #22d3ee;  /* productivity */
            --cl-pay: #facc15;   /* wages */
            --cl-wealth: #a855f7;/* wealth share */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: radial-gradient(circle at top, #111827 0, #020617 55%, #000 100%);
            color: var(--cl-text-main);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 24px;
        }

        .widget-shell {
            width: 100%;
            max-width: 980px;
        }

        /* Top branding bar – logos only */
        .branding-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 18px;
            margin-bottom: 10px;
            border-radius: 12px;
            background: linear-gradient(
                to right,
                rgba(15, 23, 42, 0.96),
                rgba(30, 64, 175, 0.92)
            );
            border-bottom: 1px solid rgba(148, 163, 184, 0.6);
        }

        .branding-logo {
            display: flex;
            align-items: center;
        }

        .branding-logo img {
            max-height: 38px;
            width: auto;
            display: block;
        }

        @media (max-width: 640px) {
            .branding-bar {
                padding: 8px 12px;
            }
            .branding-logo img {
                max-height: 28px;
            }
        }

        .widget-card {
            background: radial-gradient(circle at top left, #111827 0, #020617 55%);
            border-radius: 16px;
            border: 1px solid var(--cl-border);
            padding: 18px 20px 14px 20px;
            box-shadow:
                0 22px 55px rgba(15, 23, 42, 0.95),
                0 0 0 1px rgba(15, 23, 42, 0.9);
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 12px;
        }

        .widget-title {
            font-size: 18px;
            font-weight: 600;
        }

        .widget-subtitle {
            font-size: 12px;
            color: var(--cl-text-muted);
        }

        .widget-meta {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 2px;
            font-size: 10px;
            color: var(--cl-text-muted);
        }

        .index-note {
            font-size: 10px;
            color: var(--cl-text-muted);
            margin-bottom: 4px;
        }

        .chart-wrapper {
            position: relative;
            width: 100%;
            height: 360px;
        }

        .chart-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 8px;
            font-size: 11px;
        }

        .legend-item {
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .legend-swatch {
            width: 14px;
            height: 3px;
            border-radius: 999px;
        }

        .legend-prod {
            background: var(--cl-prod);
        }

        .legend-pay {
            background: var(--cl-pay);
        }

        .legend-wealth {
            background: var(--cl-wealth);
        }

        .footer-note {
            margin-top: 10px;
            font-size: 9px;
            color: var(--cl-text-muted);
            display: flex;
            justify-content: space-between;
            gap: 12px;
            flex-wrap: wrap;
        }

        .footer-note span {
            opacity: 0.85;
        }

        @media (max-width: 640px) {
            body {
                padding: 12px;
            }
            .widget-card {
                padding: 14px;
            }
            .chart-wrapper {
                height: 280px;
            }
        }
    </style>
</head>
<body>
<div class="widget-shell">

    <!-- Branding bar with logos only -->
    <div class="branding-bar">
        <div class="branding-logo">
            <img src="https://brianiselin.github.io/widgets-public/civicledger/civic_ledger_logo_lockup_1200w.jpg"
                 alt="The Civic Ledger logo">
        </div>
        <div class="branding-logo">
            <img src="https://brianiselin.github.io/widgets-public/Iselin_Group_Logo_1024_x.jpg"
                 alt="Iselin Group logo">
        </div>
    </div>

    <div class="widget-card">
        <div class="widget-header">
            <div>
                <div class="widget-title">Productivity, Pay, and the Top 10% Wealth Share</div>
                <div class="widget-subtitle">
                    Indexed labour productivity & pay (left axis) vs top 10% wealth share (right axis), 1980–2024
                </div>
            </div>
            <div class="widget-meta">
                <span>Sources: EPI, BLS, Federal Reserve, CBO</span>
                <span>Productivity & pay rebased to 1980 = 100; wealth share in %</span>
            </div>
        </div>

        <div class="index-note">
            Productivity and typical worker pay follow Economic Policy Institute reconstructions of BLS data, rebased so 1980 = 100.
            Top 10% wealth share is approximated from Federal Reserve Distributional Financial Accounts and CBO estimates.
        </div>

        <div class="chart-wrapper">
            <canvas id="gapChart"></canvas>
        </div>

        <div class="chart-legend">
            <div class="legend-item">
                <span class="legend-swatch legend-prod"></span>
                <span>Labour productivity (index, left axis)</span>
            </div>
            <div class="legend-item">
                <span class="legend-swatch legend-pay"></span>
                <span>Typical worker pay (index, left axis)</span>
            </div>
            <div class="legend-item">
                <span class="legend-swatch legend-wealth"></span>
                <span>Top 10% share of total wealth (%, right axis)</span>
            </div>
        </div>

        <div class="footer-note">
            <span>Note: Chart is stylised but anchored in published series. Exact values differ by country; pattern is representative of a rich-country economy.</span>
            <span>© 2025 The Civic Ledger &amp; Iselin Group. All Rights Reserved.</span>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const years = [1980, 1990, 2000, 2010, 2020, 2024];

    // Rebased productivity & pay indices (1980 = 100), derived from EPI productivity–pay gap data
    const productivityIndex = [
        100.0,  // 1980
        110.7,  // 1990
        130.7,  // 2000
        160.5,  // 2010
        181.4,  // 2020
        188.4   // 2024 (approximate extension)
    ];

    const payIndex = [
        100.0,  // 1980
        97.9,   // 1990
        106.6,  // 2000
        119.8,  // 2010
        132.2,  // 2020
        133.9   // 2024 (approximate extension)
    ];

    // Top 10% share of wealth in %, approximated from Fed / CBO estimates
    // 1980 ~59%; 1990 ~61%; 2000 ~65%; 2010 ~67%; 2020 ~69%; 2024 ~70%
    const wealthShare = [
        59,  // 1980
        61,  // 1990
        65,  // 2000
        67,  // 2010
        69,  // 2020
        70   // 2024
    ];

    const ctx = document.getElementById('gapChart').getContext('2d');

    const styles = getComputedStyle(document.documentElement);
    const prodColor = styles.getPropertyValue('--cl-prod').trim();
    const payColor = styles.getPropertyValue('--cl-pay').trim();
    const wealthColor = styles.getPropertyValue('--cl-wealth').trim();

    new Chart(ctx, {
        type: 'line',
        data: {
            labels: years,
            datasets: [
                {
                    label: 'Labour productivity (index)',
                    data: productivityIndex,
                    borderColor: prodColor,
                    borderWidth: 2.2,
                    tension: 0.25,
                    pointRadius: 3.2,
                    pointHoverRadius: 4,
                    pointHitRadius: 8,
                    yAxisID: 'yIndex'
                },
                {
                    label: 'Typical worker pay (index)',
                    data: payIndex,
                    borderColor: payColor,
                    borderWidth: 2.2,
                    tension: 0.25,
                    pointRadius: 3.2,
                    pointHoverRadius: 4,
                    pointHitRadius: 8,
                    yAxisID: 'yIndex'
                },
                {
                    label: 'Top 10% share of total wealth (%)',
                    data: wealthShare,
                    borderColor: wealthColor,
                    borderWidth: 2.2,
                    borderDash: [5, 4],
                    tension: 0.25,
                    pointRadius: 3.2,
                    pointHoverRadius: 4,
                    pointHitRadius: 8,
                    yAxisID: 'yWealth'
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    backgroundColor: 'rgba(15, 23, 42, 0.96)',
                    borderColor: 'rgba(148, 163, 184, 0.6)',
                    borderWidth: 1,
                    titleFont: { size: 11, weight: '600' },
                    bodyFont: { size: 11 },
                    padding: 10,
                    callbacks: {
                        label: function (context) {
                            const datasetLabel = context.dataset.label || '';
                            const value = context.parsed.y;
                            if (context.dataset.yAxisID === 'yWealth') {
                                return datasetLabel + ': ' + value.toFixed(1) + '%';
                            }
                            return datasetLabel + ': ' + value.toFixed(1);
                        }
                    }
                }
            },
            scales: {
                x: {
                    grid: {
                        color: 'rgba(15, 23, 42, 0.85)'
                    },
                    ticks: {
                        color: 'rgba(209, 213, 219, 0.9)',
                        font: { size: 11 }
                    }
                },
                yIndex: {
                    position: 'left',
                    beginAtZero: false,
                    min: 90,
                    max: 200,
                    grid: {
                        color: 'rgba(31, 41, 55, 0.85)'
                    },
                    ticks: {
                        color: 'rgba(156, 163, 175, 0.9)',
                        font: { size: 11 },
                        callback: function (value) {
                            return value;
                        }
                    },
                    title: {
                        display: true,
                        text: 'Index (1980 = 100)',
                        color: 'rgba(148, 163, 184, 0.95)',
                        font: { size: 11, weight: '500' }
                    }
                },
                yWealth: {
                    position: 'right',
                    beginAtZero: false,
                    min: 55,
                    max: 72,
                    grid: {
                        drawOnChartArea: false
                    },
                    ticks: {
                        color: 'rgba(156, 163, 175, 0.95)',
                        font: { size: 11 },
                        callback: function (value) {
                            return value + '%';
                        }
                    },
                    title: {
                        display: true,
                        text: 'Top 10% share of total wealth (%)',
                        color: 'rgba(148, 163, 184, 0.95)',
                        font: { size: 11, weight: '500' }
                    }
                }
            }
        }
    });
</script>
</body>
</html>
