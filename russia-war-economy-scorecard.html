<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Russia – War-Economy Scorecard</title>
  <meta name="description" content="Interactive scorecard to explore how sanctions, oil flows, shadow fleet, repression, and buffers affect Russia’s war-economy collapse trajectory." />
  <meta property="og:title" content="Russia – War-Economy Scorecard" />
  <meta property="og:description" content="Adjust the sliders and watch the collapse meter respond." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://brianiselin.github.io/widgets-public/russia-war-economy-scorecard.html" />
  <meta name="color-scheme" content="light dark">

  <!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "22466d27b8c14ef98293d50b38526660"}'></script><!-- End Cloudflare Web Analytics -->

  <style>
    :root{
      --bg: #0b0f15;
      --panel: #0f172a;
      --muted: #94a3b8;
      --accent: #22d3ee;
      --good: #22c55e;
      --warn: #f59e0b;
      --bad: #ef4444;
      --text: #e5e7eb;
      --glass: rgba(15,23,42,0.6);
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Noto Sans',sans-serif;background:var(--bg);color:var(--text);}
    .wrap{
      min-height:100%;
      position:relative;
      overflow:hidden;
    }

    /* Documentary-style background (CSS only) */
    .bg{
      position:absolute; inset:0; z-index:0;
      background:
        radial-gradient(60% 40% at 80% 10%, rgba(239,68,68,0.06), transparent 60%),
        radial-gradient(50% 30% at 20% 80%, rgba(34,211,238,0.06), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.65)),
        url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">\
<defs>\
<filter id="grain">\
  <feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="2" stitchTiles="stitch"/>\
  <feColorMatrix type="saturate" values="0"/>\
  <feComponentTransfer><feFuncA type="linear" slope="0.08"/></feComponentTransfer>\
</filter>\
</defs>\
<g filter="url(%23grain)"><rect width="1200" height="800" fill="black"/></g>\
<g opacity="0.08" fill="none" stroke="white" stroke-width="2">\
  <path d="M100 620 L240 560 L310 590 L400 520 L510 540 L620 520 L710 560 L840 520 L920 540 L1040 500" />\
  <rect x="760" y="300" width="220" height="180" rx="2"/>\
  <path d="M780 480 L780 340 M820 480 L820 340 M860 480 L860 340 M900 480 L900 340" />\
  <path d="M840 300 L840 270 L920 270 L920 300" />\
  <circle cx="220" cy="600" r="20"/><circle cx="300" cy="580" r="16"/>\
</g>\
</svg>') center/cover no-repeat fixed;
      filter:contrast(1.1) saturate(0.75);
    }
    .overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0.35),rgba(0,0,0,0.6));z-index:0}

    header{
      position:relative; z-index:1;
      padding:24px clamp(16px,4vw,32px);
      display:flex; align-items:center; justify-content:space-between;
      backdrop-filter: blur(6px);
    }
    .brand{font-weight:700; letter-spacing:0.3px}
    .brand small{color:var(--muted);font-weight:500;}

    main{position:relative; z-index:1; padding: clamp(16px,4vw,32px);}
    .grid{
      display:grid; gap:20px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 980px){
      .grid{grid-template-columns: 420px 1fr;}
    }

    .card{
      background: var(--glass);
      border:1px solid rgba(255,255,255,0.06);
      border-radius:16px;
      padding:18px;
      box-shadow:0 10px 30px rgba(0,0,0,0.25);
      backdrop-filter: blur(8px);
    }
    h1{font-size:clamp(22px,3vw,30px); margin:0 0 6px}
    p.lede{color:var(--muted); margin:0 0 12px}
    .row{display:flex;align-items:center;gap:12px;margin:12px 0}
    .row label{flex:0 0 160px;color:#cbd5e1}
    .row output{min-width:48px;text-align:right;color:#fff;font-variant-numeric:tabular-nums}
    input[type="range"]{width:100%}

    .gauge{
      display:grid; place-items:center;
      min-height: 360px;
    }
    .dial{
      width: 320px; height: 320px; border-radius: 50%;
      background: conic-gradient(var(--good) 0turn, var(--warn) 0.33turn, var(--bad) 1turn);
      filter: saturate(1.1);
      display:grid; place-items:center;
      box-shadow: inset 0 0 30px rgba(0,0,0,0.35), 0 10px 30px rgba(0,0,0,0.3);
    }
    .dial .mask{
      width: 260px; height: 260px; border-radius: 50%;
      background: linear-gradient(180deg,#0b1220,#0a0f1a);
      border:1px solid rgba(255,255,255,0.06);
      display:grid; place-items:center;
      position:relative;
    }
    .needle{
      --angle: 0deg;
      position:absolute; width:4px; height:120px; top:10px; left:calc(50% - 2px);
      background: linear-gradient(var(--accent),#7dd3fc);
      transform-origin: bottom center;
      transform: rotate(var(--angle));
      border-radius:2px;
      box-shadow:0 0 14px rgba(125,211,252,0.6);
    }
    .score{
      text-align:center;
      font-size:48px; font-weight:800; letter-spacing:0.5px;
    }
    .score small{display:block;color:var(--muted);font-size:12px;font-weight:600;letter-spacing:0.8px;margin-top:6px}

    .kpis{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:10px}
    .kpi{padding:12px;border:1px solid rgba(255,255,255,0.08);border-radius:12px;background:rgba(255,255,255,0.03)}
    .kpi b{display:block;font-size:22px;margin-bottom:6px}
    .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
    .btn{
      padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,0.1);
      background:rgba(255,255,255,0.04); color:#fff; cursor:pointer;
    }
    .btn:hover{background:rgba(255,255,255,0.08)}
    footer{padding:18px;color:var(--muted);text-align:center}
    a{color:#7dd3fc}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="bg" aria-hidden="true"></div>
    <div class="overlay" aria-hidden="true"></div>

    <header>
      <div class="brand">Russia War-Economy Scorecard<br><small>Adjust the sliders; share the exact scenario via the URL.</small></div>
    </header>

    <main class="grid">
      <section class="card">
        <h1>Scenario Controls</h1>
        <p class="lede">Drag to simulate pressure on the war-economy. 0 = mild, 100 = extreme.</p>

        <div class="row">
          <label for="sanctions">Sanctions bite</label>
          <input id="sanctions" type="range" min="0" max="100" step="1" value="65">
          <output id="o-sanctions">65</output>
        </div>
        <div class="row">
          <label for="oil">Oil revenues squeeze</label>
          <input id="oil" type="range" min="0" max="100" step="1" value="55">
          <output id="o-oil">55</output>
        </div>
        <div class="row">
          <label for="shadow">Shadow fleet disruption</label>
          <input id="shadow" type="range" min="0" max="100" step="1" value="50">
          <output id="o-shadow">50</output>
        </div>
        <div class="row">
          <label for="repress">Repression costs</label>
          <input id="repress" type="range" min="0" max="100" step="1" value="40">
          <output id="o-repress">40</output>
        </div>
        <div class="row">
          <label for="buffers">Buffers & backfill (inverse)</label>
          <input id="buffers" type="range" min="0" max="100" step="1" value="35">
          <output id="o-buffers">35</output>
        </div>

        <div class="cta">
          <button class="btn" id="shareBtn">Copy permalink</button>
          <button class="btn" id="resetBtn">Reset</button>
        </div>
      </section>

      <section class="card gauge">
        <div class="dial" id="dial">
          <div class="mask">
            <div class="needle" id="needle"></div>
            <div class="score" id="score">—
              <small id="subtitle">Collapse meter (0–100)</small>
            </div>
          </div>
        </div>

        <div class="kpis">
          <div class="kpi"><b id="months">—</b><span>Estimated months to severe fiscal stress</span></div>
          <div class="kpi"><b id="gdp">—</b><span>Projected GDP drag (12-mo)</span></div>
          <div class="kpi"><b id="infl">—</b><span>Inflation impulse (core)</span></div>
          <div class="kpi"><b id="risk">—</b><span>Banking/systemic risk</span></div>
        </div>
      </section>
    </main>

    <footer>Made as a single-file widget. Background is stylised for readability (no external images).</footer>
  </div>

  <script>
    // Utilities
    const $ = sel => document.querySelector(sel);
    const qs = sel => Array.from(document.querySelectorAll(sel));
    const clamp = (v, a, b) => Math.min(Math.max(v, a), b);

    const sliders = [
      { id:'sanctions', weight: 0.28 },
      { id:'oil',       weight: 0.22 },
      { id:'shadow',    weight: 0.18 },
      { id:'repress',   weight: 0.18 },
      { id:'buffers',   weight: 0.14, inverse: true }, // higher buffers -> less collapse
    ];

    function readStateFromURL(){
      const p = new URLSearchParams(location.search);
      sliders.forEach(s => {
        const v = Number(p.get(s.id));
        if (!Number.isNaN(v)) {
          const el = document.getElementById(s.id);
          el.value = clamp(Math.round(v), 0, 100);
        }
      });
    }

    function writeStateToURL(){
      const p = new URLSearchParams();
      sliders.forEach(s => p.set(s.id, document.getElementById(s.id).value));
      const url = location.pathname + '?' + p.toString();
      history.replaceState(null, '', url);
      return location.origin + url;
    }

    function score(){
      let total = 0;
      sliders.forEach(s => {
        const v = Number(document.getElementById(s.id).value);
        const u = s.inverse ? (100 - v) : v;
        total += u * s.weight;
      });
      return Math.round(total);
    }

    function fmtPct(n){ return (Math.round(n*10)/10).toFixed(1) + '%'; }

    function update(){
      // update outputs
      sliders.forEach(s => {
        const v = Number(document.getElementById(s.id).value);
        document.getElementById('o-' + s.id).textContent = v;
      });

      const sc = score(); // 0..100
      // Needle goes -130deg to +130deg
      const angle = -130 + (260 * sc / 100);
      document.getElementById('needle').style.setProperty('--angle', angle + 'deg');
      document.getElementById('score').firstChild.nodeValue = sc;

      // Rough derived KPIs (illustrative only)
      const pressure = sc/100;
      const months = clamp(Math.round(24 - 18*pressure), 3, 30); // 24 down to ~6
      const gdp = clamp(1.5 + 3.5*pressure, 0.5, 5.0);          // 1.5% to 5.0% drag
      const infl = clamp(1.0 + 4.0*pressure, 0.5, 6.0);         // 1% to 6% impulse
      const sys = clamp(10 + 70*pressure, 10, 95);              // risk index

      document.getElementById('months').textContent = months + ' mo';
      document.getElementById('gdp').textContent = '-' + fmtPct(gdp);
      document.getElementById('infl').textContent = '+' + fmtPct(infl);
      document.getElementById('risk').textContent = sys + '/100';

      writeStateToURL();
    }

    function reset(){
      const defaults = {sanctions:65, oil:55, shadow:50, repress:40, buffers:35};
      Object.entries(defaults).forEach(([k,v])=>{ document.getElementById(k).value = v; });
      update();
    }

    // Init
    document.addEventListener('DOMContentLoaded', () => {
      readStateFromURL();
      update();
      qs('input[type="range"]').forEach(el => el.addEventListener('input', update));
      document.getElementById('shareBtn').addEventListener('click', () => {
        const link = writeStateToURL();
        navigator.clipboard.writeText(link).then(()=>{
          const b = document.getElementById('shareBtn'); const t=b.textContent;
          b.textContent='Copied!'; setTimeout(()=>b.textContent=t,1200);
        });
      });
      document.getElementById('resetBtn').addEventListener('click', reset);
    });
  </script>
</body>
</html>
