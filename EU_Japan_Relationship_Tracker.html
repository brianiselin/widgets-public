<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EU-Japan Relationship Tracker | Iselin Group</title>
    <meta name="description" content="Comprehensive tracker of EU-Japan relations covering trade, investment, technology, diplomatic engagement, and strategic cooperation.">

    <!-- Cloudflare Web Analytics -->
    <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "22466d27b8c14ef98293d50b38526660"}'></script>
    <!-- End Cloudflare Web Analytics -->

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>

    <!-- html2canvas for PNG export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        * {margin:0;padding:0;box-sizing:border-box;}
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #0a1628 0%, #1a2a42 100%);
            color: #e0e6ed;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .brand-bar-top {
            background: linear-gradient(90deg, rgba(10, 22, 40, 0.95) 0%, rgba(26, 42, 66, 0.95) 100%);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .brand-chip {display:flex;align-items:center;gap:8px;background:rgba(59,130,246,0.1);padding:6px 12px;border-radius:20px;border:1px solid rgba(59,130,246,0.3);}
        .brand-logo{height:24px;width:24px;object-fit:contain;border-radius:4px;}
        .brand-chip-text{font-size:11px;font-weight:600;color:#60a5fa;text-transform:uppercase;letter-spacing:1px;}
        .brand-center{font-size:12px;color:#64748b;letter-spacing:0.5px;}
        .container{max-width:1600px;margin:0 auto;padding:40px 24px;flex:1;}
        .header{display:flex;align-items:center;gap:16px;margin-bottom:24px;}
        .flags-container{display:flex;align-items:center;gap:12px;}
        .flag-box{width:64px;height:64px;background:#003399;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:36px;}
        .japan-flag-box{background:#fff;border:1px solid rgba(0,0,0,0.1);}
        .header-content{flex:1;}
        .main-title{font-size:42px;font-weight:700;color:#f1f5f9;margin-bottom:8px;}
        .ranking-info{font-size:14px;color:#94a3b8;margin-top:8px;}
        .ranking-badge{display:inline-block;background:rgba(245,158,11,0.2);padding:4px 12px;border-radius:12px;color:#fbbf24;font-weight:600;margin-left:8px;}
        .score-badge{display:inline-block;background:linear-gradient(135deg,#1c3359 0%,#eb678f 100%);padding:8px 24px;border-radius:24px;font-size:32px;font-weight:700;color:white;margin-left:16px;}
        .subscores{display:flex;gap:16px;margin-top:16px;flex-wrap:wrap;}
        .subscore{display:flex;flex-direction:column;align-items:center;gap:4px;}
        .subscore-label{font-size:11px;color:#64748b;text-transform:uppercase;letter-spacing:0.5px;}
        .subscore-value{font-size:20px;font-weight:700;color:#f1f5f9;background:rgba(239,68,68,0.2);padding:4px 12px;border-radius:8px;}
        .action-buttons{display:flex;gap:12px;margin-bottom:32px;}
        .btn{padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;gap:8px;}
        .btn-primary{background:#eb678f;color:white;}
        .btn-primary:hover{background:#1c3359;transform:translateY(-2px);}
        .btn-secondary{background:rgba(255,255,255,0.1);color:#e0e6ed;border:1px solid rgba(255,255,255,0.2);}
        .btn-secondary:hover{background:rgba(255,255,255,0.15);}
        #widget-area{background:rgba(15,23,42,0.6);border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:32px;backdrop-filter:blur(10px);}
        .section-header{font-size:24px;font-weight:700;color:#f1f5f9;margin-bottom:20px;padding-bottom:12px;border-bottom:2px solid rgba(59,130,246,0.3);}
        .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;margin-bottom:40px;}
        .stat-card{background:linear-gradient(135deg,rgba(30,41,59,0.8)0%,rgba(15,23,42,0.8)100%);border:1px solid rgba(255,255,255,0.1);border-radius:12px;padding:20px;position:relative;overflow:hidden;}
        .stat-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#13b0bf 0%,#eb678f 100%);}
        .stat-card.green::before{background:linear-gradient(90deg,#10b981 0%,#34d399 100%);}
        .stat-card.blue::before{background:linear-gradient(90deg,#0ea5e9 0%,#38bdf8 100%);}
        .stat-card.purple::before{background:linear-gradient(90deg,#6366f1 0%,#a78bfa 100%);}
        .stat-title{font-size:12px;color:#94a3b8;margin-bottom:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;}
        .stat-value{font-size:36px;font-weight:700;color:#f1f5f9;margin-bottom:6px;display:flex;align-items:baseline;gap:6px;}
        .stat-unit{font-size:20px;color:#94a3b8;}
        .stat-change{font-size:12px;font-weight:600;display:inline-block;padding:2px 8px;border-radius:4px;}
        .stat-change.positive{color:#34d399;background:rgba(52,211,153,0.1);}
        .stat-change.negative{color:#f87171;background:rgba(248,113,113,0.1);}
        .stat-change.neutral{color:#60a5fa;background:rgba(96,165,250,0.1);}
        .stat-label{font-size:14px;color:#cbd5e1;margin-left:6px;}
        .stat-sublabel{font-size:11px;color:#64748b;margin-top:4px;}
        .charts-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:24px;margin-bottom:40px;}
        .chart-container{background:rgba(30,41,59,0.6);border:1px solid rgba(255,255,255,0.1);border-radius:12px;padding:24px;}
        .chart-container.full-width{grid-column:1/-1;}
        .chart-title{font-size:18px;font-weight:600;color:#f1f5f9;margin-bottom:20px;}
        .chart-wrapper{height:300px;position:relative;}
        .chart-wrapper.tall{height:400px;}
        .flow-container{display:flex;justify-content:space-around;align-items:center;padding:40px 0;}
        .flow-entity{text-align:center;}
        .flow-flag{font-size:64px;margin-bottom:12px;}
        .flow-label{font-size:16px;font-weight:600;color:#f1f5f9;}
        .flow-arrows{display:flex;flex-direction:column;gap:20px;}
        .flow-arrow{display:flex;align-items:center;gap:12px;}
        .arrow-line{width:200px;height:3px;background:linear-gradient(90deg,#13b0bf 0%,#eb678f 100%);position:relative;}
        .arrow-line::after{content:'‚ñ∂';position:absolute;right:-8px;top:-8px;color:#eb678f;font-size:16px;}
        .arrow-reverse .arrow-line{background:linear-gradient(90deg,#38bdf8 0%,#0ea5e9 100%);}
        .arrow-reverse .arrow-line::after{content:'‚óÄ';right:auto;left:-8px;color:#0ea5e9;}
        .flow-value{font-size:18px;font-weight:700;color:#f1f5f9;min-width:100px;}
        .flow-description{font-size:12px;color:#94a3b8;}
        .heatmap-grid{display:grid;grid-template-columns:200px repeat(5,1fr);gap:8px;margin-top:20px;}
        .heatmap-label{font-size:13px;color:#cbd5e1;padding:12px 8px;display:flex;align-items:center;}
        .heatmap-cell{height:48px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;color:white;transition:transform 0.2s;}
        .heatmap-cell:hover{transform:scale(1.05);}
        .intensity-very-high{background:linear-gradient(135deg,#eb678f 0%,#13b0bf 100%);}
        .intensity-high{background:linear-gradient(135deg,#13b0bf 0%,#38bdf8 100%);}
        .intensity-medium{background:linear-gradient(135deg,#38bdf8 0%,#bbf7d0 100%);}
        .intensity-low{background:linear-gradient(135deg,#64748b 0%,#94a3b8 100%);}
        .timeline{display:flex;justify-content:space-between;align-items:center;position:relative;padding:40px 0;overflow-x:auto;}
        .timeline::before{content:'';position:absolute;top:50%;left:0;right:0;height:2px;background:linear-gradient(90deg,#13b0bf 0%,#eb678f 100%);transform:translateY(-50%);}
        .timeline-item{position:relative;text-align:center;z-index:1;min-width:120px;}
        .timeline-dot{width:16px;height:16px;background:#13b0bf;border:3px solid #0f172a;border-radius:50%;margin:0 auto 12px;}
        .timeline-label{font-size:12px;font-weight:600;color:#cbd5e1;line-height:1.4;max-width:120px;margin:0 auto;margin-top:34px;padding-top:4px;}
        .timeline-year{font-size:11px;color:#64748b;margin-top:4px;}
        .sources-card{background:rgba(30,41,59,0.6);border:1px solid rgba(255,255,255,0.1);border-radius:12px;padding:24px;}
        .sources-list{list-style:none;padding:0;margin:0;}
        .source-item{font-size:14px;color:#cbd5e1;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.05);line-height:1.6;}
        .source-item:last-child{border-bottom:none;}
        .methodology-highlight{color:#60a5fa;font-weight:600;}
        .brand-bar-bottom{background:rgba(10,22,40,0.95);border-top:1px solid rgba(255,255,255,0.1);padding:24px;margin-top:auto;}
        .bottom-content{max-width:1600px;margin:0 auto;display:flex;flex-direction:column;gap:16px;}
        .bottom-title{font-size:14px;font-weight:600;color:#94a3b8;}
        .bottom-meta{font-size:12px;color:#64748b;line-height:1.6;}
        .ip-notice{font-size:11px;color:#475569;font-variant:small-caps;line-height:1.6;padding-top:12px;border-top:1px solid rgba(255,255,255,0.05);}
        .toast{position:fixed;bottom:24px;right:24px;background:#10b981;color:white;padding:16px 24px;border-radius:8px;font-size:14px;font-weight:600;box-shadow:0 10px 40px rgba(0,0,0,0.3);opacity:0;transform:translateY(20px);transition:all 0.3s ease;z-index:1000;}
        .toast.show{opacity:1;transform:translateY(0);}
        .share-menu{position:absolute;top:100%;right:0;margin-top:8px;background:rgba(30,41,59,0.95);border:1px solid rgba(255,255,255,0.2);border-radius:8px;padding:8px;display:none;flex-direction:column;gap:4px;min-width:160px;backdrop-filter:blur(10px);z-index:200;}
        .share-menu.show{display:flex;}
        .share-item{padding:10px 16px;color:#e0e6ed;text-decoration:none;border-radius:6px;font-size:14px;transition:background 0.2s;}
        .share-item:hover{background:rgba(255,255,255,0.1);}
        @media (max-width:1200px){.charts-grid{grid-template-columns:1fr;}.heatmap-grid{grid-template-columns:150px repeat(5,1fr);}}
        @media (max-width:768px){.brand-bar-top{flex-direction:column;gap:12px;text-align:center;}.stats-grid{grid-template-columns:1fr;}.main-title{font-size:28px;}.score-badge{font-size:24px;padding:6px 16px;}}
    </style>
</head>
<body>
    <!-- Top Brand Bar -->
    <div class="brand-bar-top">
        <div class="brand-chip">
            <img src="https://upload.wikimedia.org/wikipedia/en/9/9e/Flag_of_Japan.svg" alt="Japan" class="brand-logo">
            <img src="https://upload.wikimedia.org/wikipedia/commons/b/b7/Flag_of_Europe.svg" alt="EU" class="brand-logo">
            <span class="brand-chip-text">EU-Japan</span>
        </div>
        <div class="brand-center">iselingroup.com ‚Ä¢ brian.iselin(@)iselingroup.com</div>
        <div class="brand-chip">
            <img src="https://brianiselin.github.io/widgets-public/Iselin_Group_Logo_1024%20x.jpg" alt="Iselin Group" class="brand-logo">
            <span class="brand-chip-text">Iselin Group</span>
        </div>
    </div>
    <!-- Main Content -->
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="flags-container">
                <div class="flag-box">üá™üá∫</div>
                <div class="flag-box japan-flag-box">üáØüáµ</div>
            </div>
            <div class="header-content">
                <h1 class="main-title">
                    EU-Japan Relationship Tracker
                    <span class="score-badge">7.8<span style="font-size: 18px; opacity: 0.8;">/10</span></span>
                </h1>
                <div class="ranking-info">
                    Japan: <span class="ranking-badge">EU's 7th largest trading partner</span>
                    EU: <span class="ranking-badge">Japan's 2nd largest partner (after US)</span>
                </div>
                <div class="subscores">
                    <div class="subscore">
                        <div class="subscore-label">Economic</div>
                        <div class="subscore-value">8.4</div>
                    </div>
                    <div class="subscore">
                        <div class="subscore-label">Political</div>
                        <div class="subscore-value">7.5</div>
                    </div>
                    <div class="subscore">
                        <div class="subscore-label">Security</div>
                        <div class="subscore-value">7.6</div>
                    </div>
                    <div class="subscore">
                        <div class="subscore-label">Cultural</div>
                        <div class="subscore-value">7.8</div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="copyLink()">
                üìã Copy Link
            </button>
            <button class="btn btn-primary" onclick="exportPNG()">
                üì∏ Export PNG
            </button>
            <div style="position: relative;">
                <button class="btn btn-secondary" onclick="toggleShareMenu()">
                    üì§ Share
                </button>
                <div id="shareMenu" class="share-menu">
                    <a href="#" class="share-item" onclick="shareNative(event)">üì± System Share</a>
                    <a href="#" class="share-item" onclick="shareX(event)">ùïè X (Twitter)</a>
                    <a href="#" class="share-item" onclick="shareLinkedIn(event)">üíº LinkedIn</a>
                    <a href="#" class="share-item" onclick="shareFacebook(event)">üìò Facebook</a>
                </div>
            </div>
        </div>
        <!-- Widget Area -->
        <div id="widget-area">
            <!-- Trade & Investment Section -->
            <h2 class="section-header">Trade & Investment</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-title">Total Trade (2023)</div>
                    <div class="stat-value">
                        ‚Ç¨188<span class="stat-unit">B</span>
                    </div>
                    <div class="stat-change positive">+9% since 2019</div>
                    <div class="stat-sublabel">Goods + Services (EPA era)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">Goods Trade (2024)</div>
                    <div class="stat-value">
                        ‚Ç¨131<span class="stat-unit">B</span>
                    </div>
                    <div class="stat-change positive">+4.2% YoY</div>
                    <div class="stat-sublabel">EU exports: ‚Ç¨68.8B, imports: ‚Ç¨62.2B</div>
                </div>
                <div class="stat-card green">
                    <div class="stat-title">Services Trade (2023)</div>
                    <div class="stat-value">
                        ‚Ç¨58<span class="stat-unit">B</span>
                    </div>
                    <div class="stat-change positive">EU surplus ‚Ç¨17.6B</div>
                    <div class="stat-sublabel">+34.7% since EPA (2018)</div>
                </div>
                <div class="stat-card blue">
                    <div class="stat-title">EU FDI Stock in Japan (2023)</div>
                    <div class="stat-value">
                        ‚Ç¨86.6<span class="stat-unit">B</span>
                    </div>
                    <div class="stat-change neutral">Steady flows</div>
                    <div class="stat-sublabel">Official EC/Eurostat data</div>
                </div>
                <div class="stat-card blue">
                    <div class="stat-title">Japan FDI Stock in EU (2023)</div>
                    <div class="stat-value">
                        ‚Ç¨212.5<span class="stat-unit">B</span>
                    </div>
                    <div class="stat-change positive">Major investor</div>
                    <div class="stat-sublabel">Mainly Netherlands, Germany</div>
                </div>
                <div class="stat-card purple">
                    <div class="stat-title">Trade Balance (2024)</div>
                    <div class="stat-value">
                        ‚Ç¨3.1<span class="stat-unit">B</span>
                    </div>
                    <div class="stat-change positive">EU surplus (goods)</div>
                    <div class="stat-sublabel">Total surplus (goods+services): ‚Ç¨10.2B (2023)</div>
                </div>
            </div>
            <!-- Trade Flow Diagram -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Bilateral Trade Flows (2024, Goods Only)</h3>
                <div class="flow-container">
                    <div class="flow-entity">
                        <div class="flow-flag">üá™üá∫</div>
                        <div class="flow-label">European Union</div>
                    </div>
                    <div class="flow-arrows">
                        <div class="flow-arrow">
                            <div class="flow-value">‚Ç¨68.8B</div>
                            <div class="arrow-line"></div>
                            <div class="flow-description">EU Exports to Japan</div>
                        </div>
                        <div class="flow-arrow arrow-reverse">
                            <div class="flow-description">Japan Exports to EU</div>
                            <div class="arrow-line"></div>
                            <div class="flow-value">‚Ç¨62.2B</div>
                        </div>
                    </div>
                    <div class="flow-entity">
                        <div class="flow-flag">üáØüáµ</div>
                        <div class="flow-label">Japan</div>
                    </div>
                </div>
                <div style="text-align:center;margin-top:20px;color:#94a3b8;font-size:13px;">
                    Top EU Exports: Chemicals (30%), Motor Vehicles, Machinery, Optical/Medical Instruments, Food & Drink<br>
                    Top Japan Exports: Machinery, Motor Vehicles (21%), Chemicals, Optical/Medical Instruments, Plastics
                </div>
            </div>
            <!-- Charts -->
            <div class="charts-grid">
                <div class="chart-container">
                    <h3 class="chart-title">Bilateral Trade Evolution (EPA Era: 2018-2024)</h3>
                    <div class="chart-wrapper">
                        <canvas id="tradeChart"></canvas>
                    </div>
                </div>
                <div class="chart-container">
                    <h3 class="chart-title">FDI Stock Comparison (2023)</h3>
                    <div class="chart-wrapper">
                       <canvas id="fdiChart"></canvas>
                    </div>
                </div>
            </div>
            <!-- Strategic Sectors -->
            <h2 class="section-header">Strategic Sectors & Cooperation</h2>
            <div class="stats-grid">
                <div class="stat-card purple">
                    <div class="stat-title">Digital Partnership (launched 2022)</div>
                    <div class="stat-value">
                        3<span class="stat-label">Council meetings</span>
                    </div>
                    <div class="stat-sublabel">AI, 5G/6G, semiconductors, cybersecurity, data flows</div>
                </div>
                <div class="stat-card green">
                    <div class="stat-title">Green Alliance (launched 2021)</div>
                    <div class="stat-value">
                        Active<span class="stat-label">cooperation</span>
                    </div>
                    <div class="stat-sublabel">Net-zero 2050, hydrogen, decarbonization, circular economy</div>
                </div>
                <div class="stat-card blue">
                    <div class="stat-title">Geographical Indications Protected</div>
                    <div class="stat-value">
                        423<span class="stat-label">GIs</span>
                    </div>
                    <div class="stat-sublabel">291 EU, 132 Japan (EPA framework)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">Cross-Border Data Flows Agreement</div>
                    <div class="stat-value">
                        2024<span class="stat-label">in force</span>
                    </div>
                    <div class="stat-sublabel">July 2024: Added to EPA, digital protectionism safeguard</div>
                </div>
            </div>
            <!-- Sector Engagement Heatmap -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Sector Engagement Intensity by Year (Indicative)</h3>
                <div class="heatmap-grid">
                    <div class="heatmap-label"></div>
                    <div class="heatmap-label">2020</div>
                    <div class="heatmap-label">2021</div>
                    <div class="heatmap-label">2022</div>
                    <div class="heatmap-label">2023</div>
                    <div class="heatmap-label">2024</div>
                    <div class="heatmap-label">Green Technology</div>
                    <div class="heatmap-cell intensity-medium">62</div>
                    <div class="heatmap-cell intensity-high">75</div>
                    <div class="heatmap-cell intensity-high">78</div>
                    <div class="heatmap-cell intensity-high">82</div>
                    <div class="heatmap-cell intensity-very-high">88</div>
                    <div class="heatmap-label">Digital Economy</div>
                    <div class="heatmap-cell intensity-low">45</div>
                    <div class="heatmap-cell intensity-medium">58</div>
                    <div class="heatmap-cell intensity-high">73</div>
                    <div class="heatmap-cell intensity-high">81</div>
                    <div class="heatmap-cell intensity-very-high">86</div>
                    <div class="heatmap-label">Automotive</div>
                    <div class="heatmap-cell intensity-high">78</div>
                    <div class="heatmap-cell intensity-high">80</div>
                    <div class="heatmap-cell intensity-high">83</div>
                    <div class="heatmap-cell intensity-very-high">87</div>
                    <div class="heatmap-cell intensity-very-high">91</div>
                    <div class="heatmap-label">Pharma & Chemicals</div>
                    <div class="heatmap-cell intensity-high">71</div>
                    <div class="heatmap-cell intensity-high">76</div>
                    <div class="heatmap-cell intensity-high">79</div>
                    <div class="heatmap-cell intensity-high">83</div>
                    <div class="heatmap-cell intensity-very-high">86</div>
                    <div class="heatmap-label">Semiconductors</div>
                    <div class="heatmap-cell intensity-low">38</div>
                    <div class="heatmap-cell intensity-medium">52</div>
                    <div class="heatmap-cell intensity-medium">61</div>
                    <div class="heatmap-cell intensity-high">74</div>
                    <div class="heatmap-cell intensity-high">79</div>
                </div>
            </div>
            <!-- Political & Diplomatic Engagement -->
            <h2 class="section-header">Political & Diplomatic Engagement</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-title">EU-Japan Summits</div>
                    <div class="stat-value">
                        30<span class="stat-label">total</span>
                    </div>
                    <div class="stat-sublabel">Latest: July 2025 (Tokyo, 30th Summit)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">High-Level Economic Dialogue (HLED)</div>
                    <div class="stat-value">
                        6<span class="stat-label">sessions</span>
                    </div>
                    <div class="stat-sublabel">Latest: May 2024 (economic security focus)</div>
                </div>
                <div class="stat-card green">
                    <div class="stat-title">Strategic Partnership Agreement (SPA)</div>
                    <div class="stat-value">
                        2018<span class="stat-label">signed</span>
                    </div>
                    <div class="stat-sublabel">Political-security cooperation framework</div>
                </div>
                <div class="stat-card blue">
                    <div class="stat-title">Economic Partnership Agreement (EPA)</div>
                    <div class="stat-value">
                        2019<span class="stat-label">in force</span>
                    </div>
                    <div class="stat-sublabel">5th anniversary: Feb 2024, 99%/97% tariff liberalization</div>
                </div>
            </div>
            <!-- Timeline of Key Events -->
            <div class="chart-container full-width">
                <h3 class="chart-title">Timeline of Key Events (2019-2025)</h3>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">EPA Enters into Force</div>
                        <div class="timeline-year">Feb 2019</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">EU-Japan Green Alliance Launch</div>
                        <div class="timeline-year">May 2021</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Digital Partnership Launch</div>
                        <div class="timeline-year">May 2022</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Submarine Cable MoU Signed</div>
                        <div class="timeline-year">July 2023</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">Data Flows Agreement in Force</div>
                        <div class="timeline-year">July 2024</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot"></div>
                        <div class="timeline-label">30th EU-Japan Summit</div>
                        <div class="timeline-year">July 2025</div>
                    </div>
                </div>
            </div>
            <!-- Methodology Panel -->
            <h2 class="section-header">Methodology & Assessment Framework</h2>
            <div class="charts-grid">
                <div class="chart-container sources-card">
                    <h3 class="chart-title">Primary Data Sources</h3>
                    <ul class="sources-list">
                        <li class="source-item">European Commission DG Trade (official 2023-2024 data)</li>
                        <li class="source-item">Eurostat trade & FDI statistics (2023-2024)</li>
                        <li class="source-item">MOFA Japan: EU-Japan Summit & dialogue reports</li>
                        <li class="source-item">EU-Japan Centre for Industrial Cooperation trade reports</li>
                        <li class="source-item">Official EPA Committee documents and HLED press releases</li>
                    </ul>
                </div>
                <div class="chart-container sources-card">
                    <h3 class="chart-title">Analysis & Assessment</h3>
                    <ul class="sources-list">
                        <li class="source-item"><span class="methodology-highlight">Overall Engagement Score:</span> Weighted aggregate of economic, political, security, and cultural cooperation metrics</li>
                        <li class="source-item"><span class="methodology-highlight">Sector Intensity:</span> Based on official policy documents, investment trends, joint R&amp;D initiatives, regulatory alignment</li>
                        <li class="source-item"><span class="methodology-highlight">Trade & FDI Trends:</span> Eurostat and DG Trade validated data, EPA impact analysis (2018-2024)</li>
                        <li class="source-item"><span class="methodology-highlight">Diplomatic Activity:</span> Summit frequency, HLED sessions, joint declarations, sectoral dialogues</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- Bottom Brand Bar -->
    <div class="brand-bar-bottom">
        <div class="bottom-content">
            <div class="bottom-title">Iselin Group ‚Ä¢ EU-Japan Strategic Policy Tracker</div>
            <div class="bottom-meta">
                Commissioned by the Japanese Mission to the European Union. This dashboard is provided for consultative and research insight only. <br>
                ¬© Iselin Group 2025. <span class="ip-notice">Proprietary stylings, research, and scoring used under license.</span>
            </div>
        </div>
    </div>
    <div id="toast" class="toast"></div>
    <!-- JavaScript -->
    <script>
        function getCurrentState() {
            return {
                totalTrade: 188,
                goodsTrade: 131,
                servicesTrade: 58,
                euFDI: 86.6,
                japanFDI: 212.5,
                tradeBalance: 3.1,
                score: 7.8,
                economicScore: 8.4,
                politicalScore: 7.5,
                securityScore: 7.6,
                culturalScore: 7.8,
                timestamp: new Date().toISOString()
            };
        }
        function setStateToHash(state) {
            const encoded = encodeURIComponent(JSON.stringify(state));
            window.location.hash = encoded;
        }
        function getStateFromHash() {
            if (!window.location.hash) return null;
            try {
                return JSON.parse(decodeURIComponent(window.location.hash.substr(1)));
            } catch {
                return null;
            }
        }
        window.addEventListener('load', function() {
            const savedState = getStateFromHash();
            if (savedState) {
                console.log('Restored state:', savedState);
            }
        });
        function copyLink() {
            const state = getCurrentState();
            setStateToHash(state);
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(function() {
                showToast('Link copied to clipboard!');
            }).catch(function(err) {
                showToast('Failed to copy link', 'error');
            });
        }
        function exportPNG() {
            const element = document.getElementById('widget-area');
            showToast('Generating PNG...');
            html2canvas(element, {
                backgroundColor: null,
                scale: 2,
                useCORS: true,
                logging: false,
                windowWidth: element.scrollWidth,
                windowHeight: element.scrollHeight
            }).then(function(canvas) {
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.download = 'eu-japan-tracker.png';
                    link.href = url;
                    link.click();
                    URL.revokeObjectURL(url);
                    showToast('PNG exported successfully!');
                });
            }).catch(function(error) {
                console.error('Export failed:', error);
                showToast('Export failed', 'error');
            });
        }
        function toggleShareMenu() {
            const menu = document.getElementById('shareMenu');
            menu.classList.toggle('show');
            if (menu.classList.contains('show')) {
                setTimeout(() => {
                    document.addEventListener('click', closeShareMenu);
                }, 10);
            }
        }
        function closeShareMenu(e) {
            const menu = document.getElementById('shareMenu');
            if (!e.target.closest('#shareMenu') && !e.target.closest('.btn-secondary')) {
                menu.classList.remove('show');
                document.removeEventListener('click', closeShareMenu);
            }
        }
        function shareNative(e) {
            e.preventDefault();
            const state = getCurrentState();
            setStateToHash(state);
            const url = window.location.href;
            if (navigator.share) {
                navigator.share({title:'EU-Japan Relations Tracker',text:'EU-Japan Relations Tracker',url:url})
                    .then(()=>{showToast('Shared successfully!');})
                    .catch((error)=>{if(error.name!=='AbortError'){console.error('Share failed:',error);}});
            } else {
                showToast('Native sharing not supported', 'error');
            }
        }
        function shareX(e) {
            e.preventDefault();
            const state = getCurrentState();
            setStateToHash(state);
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('EU-Japan Relations Tracker');
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`,'_blank');
        }
        function shareLinkedIn(e) {
            e.preventDefault();
            const state = getCurrentState();
            setStateToHash(state);
            const url = encodeURIComponent(window.location.href);
            window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${url}`,'_blank');
        }
        function shareFacebook(e) {
            e.preventDefault();
            const state = getCurrentState();
            setStateToHash(state);
            const url = encodeURIComponent(window.location.href);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`,'_blank');
        }
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.background = type === 'error' ? '#eb678f' : '#10b981';
            toast.classList.add('show');
            setTimeout(()=>{toast.classList.remove('show');},3000);
        }
        window.addEventListener('hashchange', function() {
            const state = getStateFromHash();
            if (state) {
                console.log('State updated from hash:', state);
            }
        });

        // CHARTS with real data
        window.addEventListener('DOMContentLoaded', function() {
            // Trade evolution (EPA era: 2018-2024, real data from EC)
            const ctxTrade = document.getElementById('tradeChart').getContext('2d');
            new Chart(ctxTrade, {
                type: 'line',
                data: {
                    labels: ['2018', '2019', '2020', '2021', '2022', '2023', '2024'],
                    datasets: [{
                        label: 'Total Trade (‚Ç¨B, goods+services)',
                        data: [156, 173, 165, 178, 183, 188, 193],
                        borderColor: '#13b0bf',
                        backgroundColor: 'rgba(19,176,191,0.08)',
                        tension: 0.3,
                        fill:true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {legend:{labels:{color:'#cbd5e1',font:{size:12}}}},
                    scales: {
                        x: {ticks:{color:'#cbd5e1',font:{size:12}}},
                        y: {beginAtZero:false,ticks:{color:'#cbd5e1'},grid:{color:'rgba(255,255,255,0.05)'}}
                    }
                }
            });
            // FDI stock comparison (2023 official data)
            const ctxFDI = document.getElementById('fdiChart').getContext('2d');
            new Chart(ctxFDI, {
                type: 'bar',
                data: {
                    labels: ['EU FDI in Japan', 'Japan FDI in EU'],
                    datasets: [{
                        label:'FDI Stock (‚Ç¨B, 2023)',
                        data:[86.6, 212.5],
                        backgroundColor:['#1c3359','#eb678f'],
                        borderRadius:6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {legend:{display:false}},
                    scales: {
                        x: {ticks:{color:'#cbd5e1',font:{size:12}}},
                        y: {beginAtZero:true,ticks:{color:'#cbd5e1'},grid:{color:'rgba(255,255,255,0.04)'}}
                    }
                }
            });
        });
    </script>
</body>
</html>
